include::modules/attributes.adoc[]

[id="deploy-quay-on-openshift-op-tng"]
= Deploying the {productname} Operator on {ocp}
:context: quay-operator

This document guides you through the process of deploying and configuring {productname} in your environment using the {productname} Operator. The Operator simplifies the installation, configuration, and maintenance of your registry, ensuring you have a production-ready container image repository for your enterprise.

//concepts
include::modules/operator-concepts.adoc[leveloffset=+1]
include::modules/operator-components-intro.adoc[leveloffset=+2]
include::modules/understanding-quayregistry-cr.adoc[leveloffset=+3]
include::modules/operator-components-managed.adoc[leveloffset=+4]
include::modules/operator-components-unmanaged.adoc[leveloffset=+4]
include::modules/operator-config-bundle-secret.adoc[leveloffset=+3]
//prerequisites
include::modules/operator-prereq.adoc[leveloffset=+2]
include::modules/openshift-cluster.adoc[leveloffset=+3]
include::modules/resource-requirements.adoc[leveloffset=+3]

include::modules/object-storage.adoc[leveloffset=+3]
//managed storage
include::modules/operator-managed-storage-overview.adoc[leveloffset=4]
//unmanaged storage
include::modules/operator-unmanaged-storage.adoc[leveloffset=+4]
//storage class 
include::modules/storage-class.adoc[leveloffset=+3]

//installing the operator
include::modules/operator-install.adoc[leveloffset=+1]
// Deploying
include::modules/deploying-quay-registry.adoc[leveloffset=+1]
//registry deployment
include::modules/registry-deploy-console.adoc[leveloffset=+2]
//cli
include::modules/registry-deploy-cli.adoc[leveloffset=+2]

//creating the first user
include::modules/creating-first-user.adoc[leveloffset=+1]
include::modules/first-user-ui.adoc[leveloffset=+2]
include::modules/first-user-api.adoc[leveloffset=+2]

//post installation configuration
include::modules/enabling-features-after-deployment.adoc[leveloffset=+1]
include::modules/operator-config-cli.adoc[leveloffset=+2]
include::modules/operator-config-cli-download.adoc[leveloffset=+2]

//infrastructure deployment
include::modules/operator-deploy-infrastructure.adoc[leveloffset=+1]
include::modules/labeling-taint-nodes-for-infrastructure-use.adoc[leveloffset=+2]
include::modules/creating-project-node-selector-toleration.adoc[leveloffset=+2]
include::modules/installing-quay-operator-namespace.adoc[leveloffset=+2]
include::modules/creating-registry-infra-node.adoc[leveloffset=+2]

//Advanced configuration


//Troubleshooting
include::modules/operator-quayregistry-troubleshooting.adoc[leveloffset=+1]
include::modules/operator-quayregistry-status.adoc[leveloffset=+2]
include::modules/operator-monitor-deploy-cli.adoc[leveloffset=+2]




include::modules/operator-deploy-hpa.adoc[leveloffset=+1]


//traffic ingress
[id="configuring-traffic-ingress"]
== Configuring traffic ingress
include::modules/operator-preconfig-tls-routes.adoc[leveloffset=+2]

//configuring resources
include::modules/configuring-resources-managed-components.adoc[leveloffset=+1]

//Database
[id="configuring-the-database-poc"]
== Configuring the database
include::modules/operator-unmanaged-postgres.adoc[leveloffset=+2]
include::modules/config-fields-db.adoc[leveloffset=+3]
include::modules/operator-managed-postgres.adoc[leveloffset=+3]
//* The Operator will deploy an OpenShift `Route` as the default entrypoint to the registry.  If you prefer a different entrypoint (e.g. `Ingress` or direct `Service` access that configuration will need to be done manually).
include::modules/operator-components-unmanaged-other.adoc[leveloffset=+2]
include::modules/operator-unmanaged-redis.adoc[leveloffset=+3]

[role="_additional-resources"]
.Additional resources
link:https://access.redhat.com/documentation/en-us/red_hat_quay/{producty}/html-single/configure_red_hat_quay/index#config-fields-redis[Redis configuration fields]

include::modules/operator-unmanaged-hpa.adoc[leveloffset=+3]
include::modules/operator-unmanaged-route.adoc[leveloffset=+3]
include::modules/operator-unmanaged-monitoring.adoc[leveloffset=+3]
include::modules/operator-unmanaged-mirroring.adoc[leveloffset=+3]


//SSL/TLS
include::modules/operator-custom-ssl-certs-config-bundle.adoc[leveloffset=+1]
//include::modules/ssl-create-certs.adoc[leveloffset=+2]
//include::modules/creating-custom-ssl-certs-config-bundle.adoc[leveloffset=+2]

//Deploying configuration tool
//include::modules/operator-config-ui.adoc[leveloffset=+1]

//upgrading 38-39
//removed for 3.10+
//include::modules/upgrading-postgresql.adoc[leveloffset=+1]

[role="quay-next-steps"]
.Next steps

* link:https://access.redhat.com/documentation/en-us/red_hat_quay/{producty}/html-single/red_hat_quay_operator_features/[{productname} features]

* link:https://docs.redhat.com/en/documentation/red_hat_quay/{producty}/html/securing_red_hat_quay/index[Securing {productname}]

* link:https://docs.redhat.com/en/documentation/red_hat_quay/{producty}/html/builders_and_image_automation/index[Builders and image automation]