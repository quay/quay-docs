<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Manage Red Hat Quay</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="Manage Red Hat Quay"/><link rel="next" href="#idm45584193141264" title="Preface"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><div xml:lang="en-US" class="book" id="idm45584191579008"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Quay</span> <span class="productnumber">3.5</span></div><div><h1 class="title">Manage Red Hat Quay</h1></div><div><h2 class="subtitle">Manage Red Hat Quay</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat OpenShift Documentation Team</span></div></div><div><a href="#idm45584190408768">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Manage Red Hat Quay
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="preface"><a href="#idm45584193141264">Preface</a></span></li><li><span class="chapter"><a href="#advanced-quay-configuration">1. Advanced Red Hat Quay configuration</a></span><ul><li><span class="section"><a href="#using-the-config-tool">1.1. Using Red Hat Quay Config Tool to modify Red Hat Quay</a></span><ul><li><span class="section"><a href="#running_the_config_tool_from_the_red_hat_quay_operator">1.1.1. Running the Config Tool from the Red Hat Quay Operator</a></span></li><li><span class="section"><a href="#running_the_config_tool_from_the_command_line">1.1.2. Running the Config Tool from the command line</a></span></li></ul></li><li><span class="section"><a href="#overview-advanced-config">1.2. Using the API to modify Red Hat Quay</a></span></li><li><span class="section"><a href="#editing_the_literal_config_yaml_literal_file_to_modify_red_hat_quay">1.3. Editing the <code class="literal">config.yaml</code> file to modify Red Hat Quay</a></span><ul><li><span class="section"><a href="#add_name_and_company_to_red_hat_quay_sign_in">1.3.1. Add name and company to Red Hat Quay sign-in</a></span></li><li><span class="section"><a href="#disable_tls_protocols">1.3.2. Disable TLS Protocols</a></span></li><li><span class="section"><a href="#rate_limit_api_calls">1.3.3. Rate limit API calls</a></span></li><li><span class="section"><a href="#adjust_database_connection_pooling">1.3.4. Adjust database connection pooling</a></span></li></ul></li><li><span class="section"><a href="#using_the_configuration_api">1.4. Using the configuration API</a></span><ul><li><span class="section"><a href="#retrieving_the_default_configuration">1.4.1. Retrieving the default configuration</a></span></li><li><span class="section"><a href="#retrieving_the_current_configuration">1.4.2. Retrieving the current configuration</a></span></li><li><span class="section"><a href="#validating_configuration_using_the_api">1.4.3. Validating configuration using the API</a></span></li><li><span class="section"><a href="#determining_the_required_fields">1.4.4. Determining the required fields</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#release-notifications">2. Getting Red Hat Quay release notifications</a></span></li><li><span class="chapter"><a href="#using-ssl-to-protect-quay">3. Using SSL to protect connections to Red Hat Quay</a></span><ul><li><span class="section"><a href="#create-a-ca-and-sign-a-certificate">3.1. Create a CA and sign a certificate</a></span></li><li><span class="section"><a href="#configuring-quay-to-use-the-new-certificate">3.2. Configure Red Hat Quay to use the new certificate</a></span><ul><li><span class="section"><a href="#configure-with-superuser-gui-in-quay">3.2.1. Configure SSL from the Red Hat Quay Setup screen</a></span></li><li><span class="section"><a href="#to-configure-with-the-command-line">3.2.2. Configure with the command line</a></span></li><li><span class="section"><a href="#test-the-secure-connection">3.2.3. Test the secure connection</a></span></li></ul></li><li><span class="section"><a href="#configuring-docker-to-trust-a-certificate-authority">3.3. Configuring Docker to Trust a Certificate Authority</a></span></li></ul></li><li><span class="chapter"><a href="#adding-tls-certificates-to-the-quay-enterprise-container">4. Adding TLS Certificates to the Red Hat Quay Container</a></span><ul><li><span class="section"><a href="#add-certificates-to-quay-container">4.1. Add TLS certificates to Red Hat Quay</a></span></li><li><span class="section"><a href="#add-certs-when-deployed-on-kubernetes">4.2. Add certs when deployed on Kubernetes</a></span></li></ul></li><li><span class="chapter"><a href="#proc_manage-log-storage">5. Configuring action log storage for Elasticsearch</a></span></li><li><span class="chapter"><a href="#clair-v4">6. Clair Security Scanning</a></span><ul><li><span class="section"><a href="#what_is_clair">6.1. What is Clair?</a></span></li><li><span class="section"><a href="#setting_up_clair_on_a_red_hat_quay_openshift_deloyment">6.2. Setting Up Clair on a Red Hat Quay OpenShift deloyment</a></span><ul><li><span class="section"><a href="#deploying_via_the_quay_operator">6.2.1. Deploying Via the Quay Operator</a></span></li><li><span class="section"><a href="#manually_deploying_clair">6.2.2. Manually Deploying Clair</a></span></li></ul></li><li><span class="section"><a href="#setting_up_clair_on_a_non_openshift_red_hat_quay_deployment">6.3. Setting up Clair on a non-OpenShift Red Hat Quay deployment</a></span></li><li><span class="section"><a href="#using_clair">6.4. Using Clair</a></span></li><li><span class="section"><a href="#clair_notifications">6.5. Clair Notifications</a></span></li><li><span class="section"><a href="#configuring_clair_for_disconnected_environments">6.6. Configuring Clair for Disconnected Environments</a></span></li><li><span class="section"><a href="#clair_updater_urls">6.7. Clair updater URLs</a></span></li><li><span class="section"><a href="#additional_information">6.8. Additional Information</a></span></li></ul></li><li><span class="chapter"><a href="#container-security-operator-setup">7. Scan pod images with the Container Security Operator</a></span><ul><li><span class="section"><a href="#run_the_cso_in_openshift">7.1. Run the CSO in OpenShift</a></span></li><li><span class="section"><a href="#query_image_vulnerabilities_from_the_cli">7.2. Query image vulnerabilities from the CLI</a></span></li></ul></li><li><span class="chapter"><a href="#quay-bridge-operator">8. Integrate Red Hat Quay into OpenShift with the Bridge Operator</a></span><ul><li><span class="section"><a href="#running_the_quay_bridge_operator">8.1. Running the Quay Bridge Operator</a></span><ul><li><span class="section"><a href="#prerequisites-1">8.1.1. Prerequisites</a></span></li><li><span class="section"><a href="#setting_up_and_configuring_openshift_and_red_hat_quay">8.1.2. Setting up and configuring OpenShift and Red Hat Quay</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#repository_mirroring">9. Repository mirroring</a></span><ul><li><span class="section"><a href="#repo-mirroring-in-red-hat-quay">9.1. Introduction to repository mirroring in Red Hat Quay</a></span></li><li><span class="section"><a href="#repository_mirroring_vs_georeplication">9.2. Repository Mirroring vs. Georeplication</a></span></li><li><span class="section"><a href="#using_repository_mirroring">9.3. Using repository mirroring</a></span></li><li><span class="section"><a href="#mirroring_configuration">9.4. Mirroring configuration</a></span></li><li><span class="section"><a href="#mirroring_worker">9.5. Mirroring worker</a></span></li><li><span class="section"><a href="#create-mirrored-repo">9.6. Creating a mirrored repository</a></span><ul><li><span class="section"><a href="#repository_mirroring_settings">9.6.1. Repository mirroring settings</a></span></li><li><span class="section"><a href="#advanced_settings">9.6.2. Advanced settings</a></span></li><li><span class="section"><a href="#synchronize_now">9.6.3. Synchronize now</a></span></li></ul></li><li><span class="section"><a href="#tag-patterns">9.7. Tag Patterns</a></span></li><li><span class="section"><a href="#working-with-mirrored-repo">9.8. Working with mirrored repositories</a></span></li></ul></li><li><span class="chapter"><a href="#ldap-authentication-setup-for-quay-enterprise">10. LDAP Authentication Setup for Red Hat Quay</a></span><ul><li><span class="section"><a href="#setup-ldap-configuration">10.1. Set Up LDAP Configuration</a></span><ul><li><span class="section"><a href="#full_ldap_uri">10.1.1. Full LDAP URI</a></span></li><li><span class="section"><a href="#team_synchronization">10.1.2. Team Synchronization</a></span></li><li><span class="section"><a href="#base_and_relative_distinguished_names">10.1.3. Base and Relative Distinguished Names</a></span></li><li><span class="section"><a href="#additional_user_filters">10.1.4. Additional User Filters</a></span></li><li><span class="section"><a href="#administrator_dn">10.1.5. Administrator DN</a></span></li><li><span class="section"><a href="#uid_and_mail_attributes">10.1.6. UID and Mail attributes</a></span></li><li><span class="section"><a href="#validation">10.1.7. Validation</a></span></li></ul></li><li><span class="section"><a href="#common-issues">10.2. Common Issues</a></span></li><li><span class="section"><a href="#configure-ldap-superuser">10.3. Configure an LDAP user as superuser</a></span></li></ul></li><li><span class="chapter"><a href="#prometheus-metrics-under-quay-enterprise">11. Prometheus and Grafana metrics under Red Hat Quay</a></span><ul><li><span class="section"><a href="#exposing-the-prometheus-endpoint">11.1. Exposing the Prometheus endpoint</a></span><ul><li><span class="section"><a href="#setting-up-prometheus-to-consume-metrics">11.1.1. Setting up Prometheus to consume metrics</a></span></li><li><span class="section"><a href="#dns-configuration-under-kubernetes">11.1.2. DNS configuration under Kubernetes</a></span></li><li><span class="section"><a href="#dns-configuration-for-a-manual-cluster">11.1.3. DNS configuration for a manual cluster</a></span></li></ul></li></ul></li><li><span class="chapter"><a href="#georeplication-of-storage-in-quay">12. Georeplication of storage in Red Hat Quay</a></span><ul><li><span class="section"><a href="#prerequisites">12.1. Prerequisites</a></span></li><li><span class="section"><a href="#visit-the-management-panel_manage_quay">12.2. Visit the Config Tool</a></span></li><li><span class="section"><a href="#enable-storage-replication">12.3. Enable storage replication</a></span></li><li><span class="section"><a href="#run-quay-with-storage-preferences">12.4. Run Red Hat Quay with storage preferences</a></span></li></ul></li><li><span class="chapter"><a href="#quay-troubleshooting-guides">13. Red Hat Quay Troubleshooting</a></span></li><li><span class="chapter"><a href="#quay-schema">14. Schema for Red Hat Quay configuration</a></span></li></ul></div><section class="preface" id="idm45584193141264"><div class="titlepage"><div><div><h1 class="title">Preface</h1></div></div></div><p>
			Once you have deployed a Red Hat Quay registry, there are many ways you can further configure and manage that deployment. Topics covered here include:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Advanced Red Hat Quay configuration
				</li><li class="listitem">
					Setting notifications to alert you of a new Red Hat Quay release
				</li><li class="listitem">
					Securing connections with SSL and TLS certificates
				</li><li class="listitem">
					Directing action logs storage to Elasticsearch
				</li><li class="listitem">
					Configuring image security scanning with Clair
				</li><li class="listitem">
					Scan pod images with the Container Security Operator
				</li><li class="listitem">
					Integrate Red Hat Quay into OpenShift with the Quay Bridge Operator
				</li><li class="listitem">
					Mirroring images with repository mirroring
				</li><li class="listitem">
					Sharing Quay images with a BitTorrent service
				</li><li class="listitem">
					Authenticating users with LDAP
				</li><li class="listitem">
					Enabling Quay for Prometheus and Grafana metrics
				</li><li class="listitem">
					Setting up geo-replication
				</li><li class="listitem">
					Troubleshooting Quay
				</li></ul></div></section><section class="chapter" id="advanced-quay-configuration"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Advanced Red Hat Quay configuration</h1></div></div></div><p>
			You can configure your Red Hat Quay after initial deployment using several different interfaces:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					The Red Hat Quay Config Tool: Running the <code class="literal">quay</code> container in <code class="literal">config</code> mode presents a Web-based interface for configuring the Red Hat Quay cluster. This is the recommended method for most configuration of the Red Hat Quay service itself.
				</li><li class="listitem">
					Editing the <code class="literal">config.yaml</code>: The <code class="literal">config.yaml</code> file holds most of the configuration information for the Red Hat Quay cluster. Editing that file directly is possible, but it is only recommended for advanced tuning and performance features that are not available through the Config Tool.
				</li><li class="listitem">
					Red Hat Quay API: Some Red Hat Quay configuration can be done through the API.
				</li></ul></div><p>
			While configuration for specific features is covered in separate sections, this section describes how to use each of those interfaces and perform some more advanced configuration.
		</p><section class="section" id="using-the-config-tool"><div class="titlepage"><div><div><h2 class="title">1.1. Using Red Hat Quay Config Tool to modify Red Hat Quay</h2></div></div></div><p>
				The Red Hat Quay Config Tool is made available by running a <code class="literal">quay</code> container in <code class="literal">config</code> mode alongside the regular Red Hat Quay service. Running the Config Tool is different for Red Hat Quay clusters running on OpenShift than it is for those running directly on host systems.
			</p><section class="section" id="running_the_config_tool_from_the_red_hat_quay_operator"><div class="titlepage"><div><div><h3 class="title">1.1.1. Running the Config Tool from the Red Hat Quay Operator</h3></div></div></div><p>
					If you are running the Red Hat Quay Operator from OpenShift, the Config Tool is probably already available for you to use. To access the Config Tool, do the following:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							From the OpenShift console, select the project in which Red Hat Quay is running. For example, quay-enterprise.
						</li><li class="listitem"><p class="simpara">
							From the left column, select Networking → Routes. You should see routes to both the Red Hat Quay application and Config Tool, as shown in the following image:
						</p><p class="simpara">
							<span class="inlinemediaobject"><img src="images/configtoolroute.png" alt="View the route to the Red Hat Quay Config Tool"/></span>
						</p></li><li class="listitem">
							Select the route to the Config Tool (for example, example-quayecosystem-quay-config) and select it. The Config tool Web UI should open in your browser.
						</li><li class="listitem"><p class="simpara">
							Select <code class="literal">Modify configuration for this cluster</code>. You should see the Config Tool, ready for you to change features of your Red Hat Quay cluster, as shown in the following image:
						</p><p class="simpara">
							<span class="inlinemediaobject"><img src="images/configtoolsetup.png" alt="Modify Red Hat Quay cluster settings from the Config Tool"/></span>
						</p></li><li class="listitem">
							When you have made the changes you want, select <code class="literal">Save Configuration Changes</code>. The Config Tool will validate your changes.
						</li><li class="listitem">
							Make any corrections as needed by selecting <code class="literal">Continue Editing</code> or select <code class="literal">Next</code> to continue on.
						</li><li class="listitem">
							When prompted, it is recommended that you select <code class="literal">Download Configuration</code>. That will download a tarball of your new <code class="literal">config.yaml</code>, as well as any certificates and keys used with your Red Hat Quay setup.
						</li><li class="listitem">
							Select <code class="literal">Go to deployment rollout</code>, then <code class="literal">Populate the configuration to deployments</code>. The Red Hat Quay pods will be restarted and the changes will take effect.
						</li></ol></div><p>
					The <code class="literal">config.yaml</code> file you saved can be used to make advanced changes to your configuration or just kept for future reference.
				</p></section><section class="section" id="running_the_config_tool_from_the_command_line"><div class="titlepage"><div><div><h3 class="title">1.1.2. Running the Config Tool from the command line</h3></div></div></div><p>
					If you are running Red Hat Quay directly from a host system, using tools such as the <code class="literal">podman</code> or <code class="literal">docker</code> commands, after the initial Red Hat Quay deployment, you can restart the Config Tool to modify your Red Hat Quay cluster. Here’s how:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Start quay in config mode</strong></span>: On the first <code class="literal">quay</code> node run the following, replacing <code class="literal">my-secret-password</code> with your password. If you would like to modify an existing config bundle, you can simply mount your configuration directory into the Quay container as you would in registry mode.
						</p><pre class="literallayout"># podman run --rm -it --name quay_config -p 8080:8080 \
    -v path/to/config-bundle:/conf/stack \
    registry.redhat.io/quay/quay-rhel8:v3.5.1 config my-secret-password</pre></li><li class="listitem">
							<span class="strong strong"><strong>Open browser</strong></span>: When the quay configuration tool starts up, open a browser to the URL and port 8080 of the system you are running the configuration tool on (for example <a class="link" href="https://myquay.example.com:8080">https://myquay.example.com:8080</a>). You are prompted for a username and password.
						</li></ol></div><p>
					At this point, you can begin modifying your Red Hat Quay cluster as described earlier.
				</p></section></section><section class="section" id="overview-advanced-config"><div class="titlepage"><div><div><h2 class="title">1.2. Using the API to modify Red Hat Quay</h2></div></div></div><p>
				See the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_quay/3/html-single/red_hat_quay_api_guide/index">Red Hat Quay API Guide</a> for information on how to access Red Hat Quay API.
			</p></section><section class="section" id="editing_the_literal_config_yaml_literal_file_to_modify_red_hat_quay"><div class="titlepage"><div><div><h2 class="title">1.3. Editing the <code class="literal">config.yaml</code> file to modify Red Hat Quay</h2></div></div></div><p>
				Some advanced Red Hat Quay configuration that is not available through the Config Tool can be achieved by editing the <code class="literal">config.yaml</code> file directly. Available settings are described in the <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_quay/3/html/manage_red_hat_quay/quay-schema">Schema for Red Hat Quay configuration</a> The following are examples of settings you can change directly in the <code class="literal">config.yaml</code> file.
			</p><section class="section" id="add_name_and_company_to_red_hat_quay_sign_in"><div class="titlepage"><div><div><h3 class="title">1.3.1. Add name and company to Red Hat Quay sign-in</h3></div></div></div><p>
					Setting the following will cause users to be prompted for their name and company when they first sign in. Although this is optional, it can provide you with extra data about your Red Hat Quay users:
				</p><p>
					+ <code class="literal">FEATURE_USER_METADATA: true</code>
				</p></section><section class="section" id="disable_tls_protocols"><div class="titlepage"><div><div><h3 class="title">1.3.2. Disable TLS Protocols</h3></div></div></div><p>
					You can change the SSL_PROTOCOLS setting to remove SSL protocols that you do not want to support in your Red Hat Quay instance. For example, to remove TLS v1 support from the default SSL_PROTOCOLS : ['TLSv1','TLSv1.1','TLSv1.2'], change it as follows:
				</p><p>
					+ SSL_PROTOCOLS : ['TLSv1.1','TLSv1.2']
				</p></section><section class="section" id="rate_limit_api_calls"><div class="titlepage"><div><div><h3 class="title">1.3.3. Rate limit API calls</h3></div></div></div><p>
					Adding the FEATURE_RATE_LIMITS parameter to the <code class="literal">config.yaml</code> causes <code class="literal">nginx</code> to limit certain API calls to 30 per second. If that feature is not set, API calls are limied to 300 per second (effectively unlimited). Rate limiting can be an important feature, if you need to make sure the resources available are not overwhelmed with traffic.
				</p><p>
					Some namespace may require unlimited access (perhaps they are important to CI/CD and take priority, for example). In this case, those namespace may be placed in a list in <code class="literal">config.yaml</code> for NON_RATE_LIMITED_NAMESPACES.
				</p></section><section class="section" id="adjust_database_connection_pooling"><div class="titlepage"><div><div><h3 class="title">1.3.4. Adjust database connection pooling</h3></div></div></div><p>
					Red Hat Quay is composed of many different processes which all run within the same container. Many of these processes interact with the database.
				</p><p>
					If enabled, each process that interacts with the database will contain a connection pool. These per-process connection pools are configured to maintain a maximum of 20 connections. Under heavy load, it is possible to fill the connection pool for every process within a Red Hat Quay container. Under certain deployments and loads, this may require analysis to ensure Red Hat Quay does not exceed the database’s configured maximum connection count.
				</p><p>
					Overtime, the connection pools will release idle connections. To release all connections immediately, Red Hat Quay requires a restart.
				</p><p>
					Database connection pooling may be toggled by setting the environment variable <code class="literal">DB_CONNECTION_POOLING={true|false}</code>
				</p><p>
					If database connection pooling is enabled, it is possible to change the maximum size of the connection pool. This can be done through the following <code class="literal">config.yaml</code> option:
				</p><pre class="literallayout">DB_CONNECTION_ARGS:
  max_connections: 10</pre><section class="section" id="database_connection_arguments"><div class="titlepage"><div><div><h4 class="title">1.3.4.1. Database connection arguments</h4></div></div></div><p>
						You can customize Red Hat Quay database connection settings within the <code class="literal">config.yaml</code> file. These are entirely dependent upon the underlying database driver, such as <code class="literal">psycopg2</code> for Postgres and <code class="literal">pymysql</code> for MySQL. It is also possible to pass in arguments used by Peewee’s Connection Pooling mechanism as seen below.
					</p><pre class="literallayout">DB_CONNECTION_ARGS:
  max_connections: n  # Max Connection Pool size. (Connection Pooling only)
  timeout: n  # Time to hold on to connections. (Connection Pooling only)
  stale_timeout: n  # Number of seconds to block when the pool is full. (Connection Pooling only)</pre></section><section class="section" id="http_connection_counts"><div class="titlepage"><div><div><h4 class="title">1.3.4.2. HTTP connection counts</h4></div></div></div><p>
						It is possible to specify the quantity of simultaneous HTTP connections using environment variables. These can be specified as a whole, or for a specific component. The default for each is 50 parallel connections per process.
					</p><p>
						Environment variables: - WORKER_CONNECTION_COUNT_REGISTRY=n - WORKER_CONNECTION_COUNT_WEB=n - WORKER_CONNECTION_COUNT_SECSCAN=n - WORKER_CONNECTION_COUNT=n
					</p><div class="informalexample"><p>
						Specifying a count for a specific component will override any value set in WORKER_CONNECTION_COUNT.
					</p></div></section><section class="section" id="dynamic_process_counts"><div class="titlepage"><div><div><h4 class="title">1.3.4.3. Dynamic process counts</h4></div></div></div><p>
						To estimate the quantity of dynamically sized processes, the following calculation is used by default.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Red Hat Quay queries the available CPU count from the entire machine. Any limits applied using kubernetes or other non-virtualized mechanisms will not affect this behavior; Red Hat Quay will makes its calculation based on the total number of processors on the Node. The default values listed are simply targets, but shall not exceed the maximum or be lower than the minimum.
						</p></div></div><p>
						Each of the following process quantities can be overridden using the environment variable specified below.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								registry - Provides HTTP endpoints to handle registry action
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										minimum: 8
									</li><li class="listitem">
										maximum: 64
									</li><li class="listitem">
										default: $CPU_COUNT x 4
									</li><li class="listitem">
										environment variable: WORKER_COUNT_REGISTRY
									</li></ul></div></li><li class="listitem"><p class="simpara">
								web - Provides HTTP endpoints for the web-based interface
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										minimum: 2
									</li><li class="listitem">
										maximum: 32
									</li><li class="listitem">
										default: $CPU_COUNT x 2
									</li><li class="listitem">
										environment_variable: WORKER_COUNT_WEB
									</li></ul></div></li><li class="listitem"><p class="simpara">
								secscan - Interacts with Clair
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										minimum: 2
									</li><li class="listitem">
										maximum: 4
									</li><li class="listitem">
										default: $CPU_COUNT x 2
									</li><li class="listitem">
										environment variable: WORKER_COUNT_SECSCAN
									</li></ul></div></li></ul></div></section><section class="section" id="environment_variables"><div class="titlepage"><div><div><h4 class="title">1.3.4.4. Environment variables</h4></div></div></div><p>
						Red Hat Quay allows overriding default behavior using environment variables. This table lists and describes each variable and the values they can expect.
					</p><div class="table" id="idm45584187222704"><p class="title"><strong>Table 1.1. Worker count environment variables</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm45584194796464" scope="col">Variable</th><th align="left" valign="top" id="idm45584194795376" scope="col">Description</th><th align="left" valign="top" id="idm45584194794288" scope="col">Values</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm45584194796464">
									<p>
										WORKER_COUNT_REGISTRY
									</p>
									</td><td align="left" valign="top" headers="idm45584194795376">
									<p>
										Specifies the number of processes to handle Registry requests within the Quay container.
									</p>
									</td><td align="left" valign="top" headers="idm45584194794288">
									<p>
										Integer between 8 and 64
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm45584194796464">
									<p>
										WORKER_COUNT_WEB
									</p>
									</td><td align="left" valign="top" headers="idm45584194795376">
									<p>
										Specifies the number of processes to handle UI/Web requests within the container.
									</p>
									</td><td align="left" valign="top" headers="idm45584194794288">
									<p>
										Integer between 2 and 32
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm45584194796464">
									<p>
										WORKER_COUNT_SECSCAN
									</p>
									</td><td align="left" valign="top" headers="idm45584194795376">
									<p>
										Specifies the number of processes to handle Security Scanning (e.g. Clair) integration within the container.
									</p>
									</td><td align="left" valign="top" headers="idm45584194794288">
									<p>
										Integer between 2 and 4
									</p>
									</td></tr><tr><td align="left" valign="top" headers="idm45584194796464">
									<p>
										DB_CONNECTION_POOLING
									</p>
									</td><td align="left" valign="top" headers="idm45584194795376">
									<p>
										Toggle database connection pooling. In 3.4, it is disabled by default.
									</p>
									</td><td align="left" valign="top" headers="idm45584194794288">
									<p>
										"true" or "false"
									</p>
									</td></tr></tbody></table></div></div></section><section class="section" id="turning_off_connection_pooling"><div class="titlepage"><div><div><h4 class="title">1.3.4.5. Turning off connection pooling</h4></div></div></div><p>
						Red Hat Quay deployments with a large amount of user activity can regularly hit the 2k maximum database connection limit. In these cases, connection pooling, which is enabled by default for Red Hat Quay, can cause database connection count to rise exponentially and require you to turn off connection pooling.
					</p><p>
						If turning off connection pooling is not enough to prevent hitting that 2k database connection limit, you need to take additional steps to deal with the problem. In this case you might need to increase the maximum database connections to better suit your workload.
					</p></section></section></section><section class="section" id="using_the_configuration_api"><div class="titlepage"><div><div><h2 class="title">1.4. Using the configuration API</h2></div></div></div><p>
				The configuration tool exposes 4 endpoints that can be used to build, validate, bundle and deploy a configuration. The config-tool API is documented at <a class="link" href="https://github.com/quay/config-tool/blob/master/pkg/lib/editor/API.md">https://github.com/quay/config-tool/blob/master/pkg/lib/editor/API.md</a>. In this section, you will see how to use the API to retrieve the current configuration and how to validate any changes you make.
			</p><section class="section" id="retrieving_the_default_configuration"><div class="titlepage"><div><div><h3 class="title">1.4.1. Retrieving the default configuration</h3></div></div></div><p>
					If you are running the configuration tool for the first time, and do not have an existing configuration, you can retrieve the default configuration. Start the container in config mode:
				</p><pre class="literallayout">$ sudo podman run --rm -it --name quay_config \
  -p 8080:8080 \
  registry.redhat.io/quay/quay-rhel8:v3.5.1 config secret</pre><p>
					Use the <code class="literal">config</code> endpoint of the configuration API to get the default:
				</p><pre class="literallayout">$ curl -X GET -u quayconfig:secret http://quay-server:8080/api/v1/config  | jq</pre><p>
					The value returned is the default configuration in JSON format:
				</p><pre class="programlisting language-json">{
  "config.yaml": {
    "AUTHENTICATION_TYPE": "Database",
    "AVATAR_KIND": "local",
    "DB_CONNECTION_ARGS": {
      "autorollback": true,
      "threadlocals": true
    },
    "DEFAULT_TAG_EXPIRATION": "2w",
    "EXTERNAL_TLS_TERMINATION": false,
    "FEATURE_ACTION_LOG_ROTATION": false,
    "FEATURE_ANONYMOUS_ACCESS": true,
    "FEATURE_APP_SPECIFIC_TOKENS": true,
    ....
  }

}</pre></section><section class="section" id="retrieving_the_current_configuration"><div class="titlepage"><div><div><h3 class="title">1.4.2. Retrieving the current configuration</h3></div></div></div><p>
					If you have already configured and deployed the Quay registry, stop the container and restart it in configuration mode, loading the existing configuration as a volume:
				</p><pre class="literallayout">$ sudo podman run --rm -it --name quay_config \
  -p 8080:8080 \
  -v $QUAY/config:/conf/stack:Z \
  registry.redhat.io/quay/quay-rhel8:v3.5.1 config secret</pre><p>
					Use the <code class="literal">config</code> endpoint of the API to get the current configuration:
				</p><pre class="literallayout">$ curl -X GET -u quayconfig:secret http://quay-server:8080/api/v1/config  | jq</pre><p>
					The value returned is the current configuration in JSON format, including database and Redis configuration data:
				</p><pre class="programlisting language-json">{
  "config.yaml": {
    ....
    "BROWSER_API_CALLS_XHR_ONLY": false,
    "BUILDLOGS_REDIS": {
      "host": "quay-server",
      "password": "strongpassword",
      "port": 6379
    },
    "DATABASE_SECRET_KEY": "4b1c5663-88c6-47ac-b4a8-bb594660f08b",
    "DB_CONNECTION_ARGS": {
      "autorollback": true,
      "threadlocals": true
    },
    "DB_URI": "postgresql://quayuser:quaypass@quay-server:5432/quay",
    "DEFAULT_TAG_EXPIRATION": "2w",
    ....


  }

}</pre></section><section class="section" id="validating_configuration_using_the_api"><div class="titlepage"><div><div><h3 class="title">1.4.3. Validating configuration using the API</h3></div></div></div><p>
					You can validate a configuration by posting it to the <code class="literal">config/validate</code> endpoint:
				</p><pre class="literallayout">curl -u quayconfig:secret --header 'Content-Type: application/json' --request POST --data '
{
  "config.yaml": {
    ....
    "BROWSER_API_CALLS_XHR_ONLY": false,
    "BUILDLOGS_REDIS": {
      "host": "quay-server",
      "password": "strongpassword",
      "port": 6379
    },
    "DATABASE_SECRET_KEY": "4b1c5663-88c6-47ac-b4a8-bb594660f08b",
    "DB_CONNECTION_ARGS": {
      "autorollback": true,
      "threadlocals": true
    },
    "DB_URI": "postgresql://quayuser:quaypass@quay-server:5432/quay",
    "DEFAULT_TAG_EXPIRATION": "2w",
    ....

  }

} http://quay-server:8080/api/v1/config/validate | jq</pre><p>
					The returned value is an array containing the errors found in the configuration. If the configuration is valid, an empty array <code class="literal">[]</code> is returned.
				</p></section><section class="section" id="determining_the_required_fields"><div class="titlepage"><div><div><h3 class="title">1.4.4. Determining the required fields</h3></div></div></div><p>
					You can determine the required fields by posting an empty configuration structure to the <code class="literal">config/validate</code> endpoint:
				</p><pre class="literallayout">curl -u quayconfig:secret --header 'Content-Type: application/json' --request POST --data '
{
  "config.yaml": {
  }

} http://quay-server:8080/api/v1/config/validate | jq</pre><p>
					The value returned is an array indicating which fields are required:
				</p><pre class="screen">[
  {
    "FieldGroup": "Database",
    "Tags": [
      "DB_URI"
    ],
    "Message": "DB_URI is required."
  },
  {
    "FieldGroup": "DistributedStorage",
    "Tags": [
      "DISTRIBUTED_STORAGE_CONFIG"
    ],
    "Message": "DISTRIBUTED_STORAGE_CONFIG must contain at least one storage location."
  },
  {
    "FieldGroup": "HostSettings",
    "Tags": [
      "SERVER_HOSTNAME"
    ],
    "Message": "SERVER_HOSTNAME is required"
  },
  {
    "FieldGroup": "HostSettings",
    "Tags": [
      "SERVER_HOSTNAME"
    ],
    "Message": "SERVER_HOSTNAME must be of type Hostname"
  },
  {
    "FieldGroup": "Redis",
    "Tags": [
      "BUILDLOGS_REDIS"
    ],
    "Message": "BUILDLOGS_REDIS is required"
  }
]</pre></section></section></section><section class="chapter" id="release-notifications"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Getting Red Hat Quay release notifications</h1></div></div></div><p>
			To keep up with the latest Red Hat Quay releases and other changes related to Red Hat Quay, you can sign up for update notifications on the <a class="link" href="https://access.redhat.com">Red Hat Customer Portal</a>. After signing up for notifications, you will receive notifications letting you know when there is new a Red Hat Quay version, updated documentation, or other Red Hat Quay news.
		</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
					Log into the <a class="link" href="https://access.redhat.com">Red Hat Customer Portal</a> with your Red Hat customer account credentials.
				</li><li class="listitem">
					Select your user name (upper-right corner) to see Red Hat Account and Customer Portal selections: 
					<span class="inlinemediaobject"><img src="images/notification-profile.png" alt="View account and portal selections"/></span>
				</li><li class="listitem">
					Select Notifications. Your profile activity page appears.
				</li><li class="listitem">
					Select the Notifications tab.
				</li><li class="listitem">
					Select Manage Notifications.
				</li><li class="listitem">
					Select Follow, then choose Products from the drop-down box.
				</li><li class="listitem">
					From the drop-down box next to the Products, search for and select Red Hat Quay: 
					<span class="inlinemediaobject"><img src="images/notification-follow.png" alt="Select Products from notifications box"/></span>
				</li><li class="listitem">
					Select the SAVE NOTIFICATION button. Going forward, you will receive notifications when there are changes to the Red Hat Quay product, such as a new release.
				</li></ol></div></section><section class="chapter" id="using-ssl-to-protect-quay"><div class="titlepage"><div><div><h1 class="title">Chapter 3. Using SSL to protect connections to Red Hat Quay</h1></div></div></div><p>
			This document assumes you have deployed Red Hat Quay in a <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_quay/3.5/html-single/getting_started_with_red_hat_quay/">single-node</a> or <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_quay/3.5/html-single/deploy_red_hat_quay_-_high_availability">highly available</a> deployment.
		</p><p>
			To configure Red Hat Quay with a <a class="link" href="https://en.wikipedia.org/wiki/Self-signed_certificate">self-signed certificate</a>, you need to create a Certificate Authority (CA), then generate the required key and certificate files. You then enter those files using the Red Hat Quay Config Tool or command line.
		</p><section class="section" id="create-a-ca-and-sign-a-certificate"><div class="titlepage"><div><div><h2 class="title">3.1. Create a CA and sign a certificate</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a root CA.
					</p><pre class="screen">$ openssl genrsa -out rootCA.key 2048
$ openssl req -x509 -new -nodes -key rootCA.key -sha256 -days 1024 -out rootCA.pem</pre><p class="simpara">
						The result are rootCA.key and rootCA.pem files in the current directory.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Create certificate and private key</strong></span>: If you are having Red Hat Quay handle TLS, you need to create a certificate and private key to provide during configuration. You can get those files from a certificate signing authority. Here we show how to create those files using the self-signed certificate authority you just created.
					</p><p class="simpara">
						In this example, you create device.crt and device.key files, which will be uploaded to Red Hat Quay and renamed ssl.cert and ssl.key, respectively.
					</p><p class="simpara">
						Because OpenShift creates long fully qualified domain names, consider using a wildcard to identify the larger domain, instead of the specific route to the Red Hat Quay application. For example, use something like *.apps.openshift.example.com when prompted for the server’s hostname:
					</p><pre class="screen">Common Name (eg, your name or your server's hostname) []:*apps.openshift.example.com</pre><pre class="screen">$ openssl genrsa -out device.key 2048
$ openssl req -new -key device.key -out device.csr</pre><p class="simpara">
						Then sign the certificate with the root CA created earlier:
					</p><pre class="screen">$ openssl x509 -req -in device.csr -CA rootCA.pem \
       -CAkey rootCA.key -CAcreateserial -out device.crt -days 500 -sha256</pre></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Instead generating the *.key and *.crt files as just shown, you could create an <code class="literal">openssl.cnf</code> file. This lets you add more information to the resulting certificate than you can get by just responding to the prompts in the command for generating the certificate request. In this example of an <code class="literal">openssl.cnf</code> file, replace <code class="literal">DNS.1</code> and <code class="literal">IP.1</code> with the hostname and IP address of the Red Hat Quay server:
				</p><p>
					<code class="literal">openssl.cnf</code>
				</p><pre class="screen">[req]
req_extensions = v3_req
distinguished_name = req_distinguished_name
[req_distinguished_name]
[ v3_req ]
basicConstraints = CA:FALSE
keyUsage = nonRepudiation, digitalSignature, keyEncipherment
subjectAltName = @alt_names
[alt_names]
DNS.1 = reg.example.com
IP.1 = 12.345.678.9</pre><p>
					You could then generate the key as follows:
				</p><pre class="screen">$ openssl x509 -req -in ssl.csr -CA rootCA.pem \
   -CAkey rootCA.key -CAcreateserial -out ssl.cert \
   -days 356 -extensions v3_req -extfile openssl.cnf</pre></div></div></section><section class="section" id="configuring-quay-to-use-the-new-certificate"><div class="titlepage"><div><div><h2 class="title">3.2. Configure Red Hat Quay to use the new certificate</h2></div></div></div><p>
				The next step can be accomplished either in the Red Hat Quay screen or from the terminal.
			</p><section class="section" id="configure-with-superuser-gui-in-quay"><div class="titlepage"><div><div><h3 class="title">3.2.1. Configure SSL from the Red Hat Quay Setup screen</h3></div></div></div><p>
					Start the quay container in config mode, as described in each deployment guide. In the server Configuration section, enable SSL as follows:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Set the <code class="literal">Server Hostname</code> to the appropriate value and check the <code class="literal">Enable SSL</code> box, then upload the <code class="literal">ssl.key</code> and <code class="literal">ssl.cert</code> files (in our example, named <code class="literal">device.key</code> and <code class="literal">device.crt</code>, respectively): 
							<span class="inlinemediaobject"><img src="images/server-config.png" alt="Enable SSL"/></span>
						</li><li class="listitem">
							Save the configuration. Red Hat Quay will automatically validate the SSL certificate: 
							<span class="inlinemediaobject"><img src="images/save-configuration.png" alt="validating SSL"/></span>
						</li><li class="listitem">
							Restart the container 
							<span class="inlinemediaobject"><img src="images/restart-container.png" alt="restart the container"/></span>
						</li></ol></div></section><section class="section" id="to-configure-with-the-command-line"><div class="titlepage"><div><div><h3 class="title">3.2.2. Configure with the command line</h3></div></div></div><p>
					By not using the web interface the configuration checking mechanism built into Red Hat Quay is unavailable. It is suggested to use the web interface if possible. For non-OpenShift installations, you can configure SSL from the command-line interface as follows:
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Copy the <code class="literal">ssl.key</code> and <code class="literal">ssl.cert</code> into the specified <code class="literal">config</code> directory. In this example, the config directory for Red Hat Quay is on a host named reg.example.com in a directory named /mnt/quay/config.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								The certificate/key files must be named ssl.key and ssl.cert.
							</p></div></div><pre class="screen">$ ls
ssl.cert  ssl.key
$ scp ssl.* root@reg.example.com:/mnt/quay/config/
[root@reg.example.com ~]$ ls /mnt/quay/config/
config.yaml  ssl.cert  ssl.key</pre></li><li class="listitem"><p class="simpara">
							Modify the <code class="literal">PREFERRED_URL_SCHEME:</code> parameter in config.yaml from <code class="literal">http</code> to <code class="literal">https</code>
						</p><pre class="screen">PREFERRED_URL_SCHEME: https</pre></li><li class="listitem"><p class="simpara">
							Restart the Red Hat Quay container:
						</p><pre class="screen">$ sudo podman ps
CONTAINER ID  IMAGE                     COMMAND                 CREATED       STATUS      PORTS                   NAMES
eaf45a4aa12d  ...redhat.io/rhel8/redis-5 "/usr/bin/redis-serve" 22 hours ago  Up 22 hours 0.0.0.0:6379-&gt;6379/tcp  dreamy...
cbe7b0fa39d8  quay.io/redhat/quay       "/sbin/my_init"         22 hours ago  Up one hour 80/tcp,443/tcp,443/tcp  ferv...
705fe7311940  rhel8/mysql-80                 "/entrypoint.sh mysql"  23 hours ago  Up 22 hours 0.0.0.0:3306-&gt;3306/tcp  mysql
$ sudo podman restart cbe7b0fa39d8</pre></li></ol></div></section><section class="section" id="test-the-secure-connection"><div class="titlepage"><div><div><h3 class="title">3.2.3. Test the secure connection</h3></div></div></div><p>
					Confirm the configuration by visiting the URL from a browser <code class="literal"><a class="link" href="https://reg.example.com/">https://reg.example.com/</a></code>
					<span class="inlinemediaobject"><img src="images/https-browser.png" alt="restart the container"/></span>
					 "Your Connection is not secure" means the CA is untrusted but confirms that SSL is functioning properly. To avoid these messages, you need to get a certificate from a trusted certificate authority.
				</p></section></section><section class="section" id="configuring-docker-to-trust-a-certificate-authority"><div class="titlepage"><div><div><h2 class="title">3.3. Configuring Docker to Trust a Certificate Authority</h2></div></div></div><p>
				Docker requires that custom certs be installed to <code class="literal">/etc/docker/certs.d/</code> under a directory with the same name as the hostname private registry. It is also required for the cert to be called <code class="literal">ca.crt</code>. Here is how to do that:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Copy the rootCA file.
					</p><pre class="screen">$ cp tmp/rootCA.pem /etc/docker/certs.d/reg.example.com/ca.crt</pre></li><li class="listitem"><p class="simpara">
						After you have copied the rootCA.pem file, <code class="literal">docker login</code> should authenticate successfully and pushing to the repository should succeed.
					</p><pre class="screen">$ sudo docker push reg.example.com/kbrwn/hello
The push refers to a repository [reg.example.com/kbrwn/hello]
5f70bf18a086: Layer already exists
e493e9cb9dac: Pushed
1770dbc4af14: Pushed
a7bb4eb71da7: Pushed
9fad7adcbd46: Pushed
2cec07a74a9f: Pushed
f342e0a3e445: Pushed
b12f995330bb: Pushed
2016366cdd69: Pushed
a930437ab3a5: Pushed
15eb0f73cd14: Pushed
latest: digest: sha256:c24be6d92b0a4e2bb8a8cc7c9bd044278d6abdf31534729b1660a485b1cd315c size: 7864</pre></li></ol></div></section></section><section class="chapter" id="adding-tls-certificates-to-the-quay-enterprise-container"><div class="titlepage"><div><div><h1 class="title">Chapter 4. Adding TLS Certificates to the Red Hat Quay Container</h1></div></div></div><p>
			To add custom TLS certificates to Red Hat Quay, create a new directory named <code class="literal">extra_ca_certs/</code> beneath the Red Hat Quay config directory. Copy any required site-specific TLS certificates to this new directory.
		</p><section class="section" id="add-certificates-to-quay-container"><div class="titlepage"><div><div><h2 class="title">4.1. Add TLS certificates to Red Hat Quay</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						View certificate to be added to the container
					</p><pre class="screen">$ cat storage.crt
-----BEGIN CERTIFICATE-----
MIIDTTCCAjWgAwIBAgIJAMVr9ngjJhzbMA0GCSqGSIb3DQEBCwUAMD0xCzAJBgNV
[...]
-----END CERTIFICATE-----</pre></li><li class="listitem"><p class="simpara">
						Create certs directory and copy certificate there
					</p><pre class="screen">$ mkdir -p quay/config/extra_ca_certs
$ cp storage.crt quay/config/extra_ca_certs/
$ tree quay/config/
├── config.yaml
├── extra_ca_certs
│   ├── storage.crt</pre></li><li class="listitem"><p class="simpara">
						Obtain the quay container’s <code class="literal">CONTAINER ID</code> with <code class="literal">podman ps</code>:
					</p><pre class="screen">$ sudo podman ps
CONTAINER ID        IMAGE                                COMMAND                  CREATED             STATUS              PORTS
5a3e82c4a75f        &lt;registry&gt;/&lt;repo&gt;/quay:v3.5.1 "/sbin/my_init"          24 hours ago        Up 18 hours         0.0.0.0:80-&gt;80/tcp, 0.0.0.0:443-&gt;443/tcp, 443/tcp   grave_keller</pre></li><li class="listitem"><p class="simpara">
						Restart the container with that ID:
					</p><pre class="screen">$ sudo podman restart 5a3e82c4a75f</pre></li><li class="listitem"><p class="simpara">
						Examine the certificate copied into the container namespace:
					</p><pre class="screen">$ sudo podman exec -it 5a3e82c4a75f cat /etc/ssl/certs/storage.pem
-----BEGIN CERTIFICATE-----
MIIDTTCCAjWgAwIBAgIJAMVr9ngjJhzbMA0GCSqGSIb3DQEBCwUAMD0xCzAJBgNV</pre></li></ol></div></section><section class="section" id="add-certs-when-deployed-on-kubernetes"><div class="titlepage"><div><div><h2 class="title">4.2. Add certs when deployed on Kubernetes</h2></div></div></div><p>
				When deployed on Kubernetes, Red Hat Quay mounts in a secret as a volume to store config assets. Unfortunately, this currently breaks the upload certificate function of the superuser panel.
			</p><p>
				To get around this error, a base64 encoded certificate can be added to the secret <span class="emphasis"><em>after</em></span> Red Hat Quay has been deployed. Here’s how:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Begin by base64 encoding the contents of the certificate:
					</p><pre class="screen">$ cat ca.crt
-----BEGIN CERTIFICATE-----
MIIDljCCAn6gAwIBAgIBATANBgkqhkiG9w0BAQsFADA5MRcwFQYDVQQKDA5MQUIu
TElCQ09SRS5TTzEeMBwGA1UEAwwVQ2VydGlmaWNhdGUgQXV0aG9yaXR5MB4XDTE2
MDExMjA2NTkxMFoXDTM2MDExMjA2NTkxMFowOTEXMBUGA1UECgwOTEFCLkxJQkNP
UkUuU08xHjAcBgNVBAMMFUNlcnRpZmljYXRlIEF1dGhvcml0eTCCASIwDQYJKoZI
[...]
-----END CERTIFICATE-----

$ cat ca.crt | base64 -w 0
[...]
c1psWGpqeGlPQmNEWkJPMjJ5d0pDemVnR2QNCnRsbW9JdEF4YnFSdVd3PT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=</pre></li><li class="listitem"><p class="simpara">
						Use the <code class="literal">kubectl</code> tool to edit the quay-enterprise-config-secret.
					</p><pre class="screen">$ kubectl --namespace quay-enterprise edit secret/quay-enterprise-config-secret</pre></li><li class="listitem"><p class="simpara">
						Add an entry for the cert and paste the full base64 encoded string under the entry:
					</p><pre class="screen">  custom-cert.crt:
c1psWGpqeGlPQmNEWkJPMjJ5d0pDemVnR2QNCnRsbW9JdEF4YnFSdVd3PT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=</pre></li><li class="listitem">
						Finally, recycle all Red Hat Quay pods. Use <code class="literal">kubectl delete</code> to remove all Red Hat Quay pods. The Red Hat Quay Deployment will automatically schedule replacement pods with the new certificate data.
					</li></ol></div></section></section><section class="chapter" id="proc_manage-log-storage"><div class="titlepage"><div><div><h1 class="title">Chapter 5. Configuring action log storage for Elasticsearch</h1></div></div></div><p>
			By default, the past three months of usage logs are stored in the Red Hat Quay database and exposed via the web UI on organization and repository levels. Appropriate administrative privileges are required to see log entries. For deployments with a large amount of logged operations, you can now store the usage logs in Elasticsearch instead of the Red Hat Quay database backend. To do this, you need to provide your own Elasticsearch stack, as it is not included with Red Hat Quay as a customizable component.
		</p><p>
			Enabling Elasticsearch logging can be done during Red Hat Quay deployment or post-deployment using the Red Hat Quay Config Tool. The resulting configuration is stored in the <code class="literal">config.yaml</code> file. Once configured, usage log access continues to be provided the same way, via the web UI for repositories and organizations.
		</p><p>
			Here’s how to configure action log storage to change it from the default Red Hat Quay database to use Elasticsearch:
		</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
					Obtain an Elasticsearch account.
				</li><li class="listitem">
					Open the Red Hat Quay Config Tool (either during or after Red Hat Quay deployment).
				</li><li class="listitem"><p class="simpara">
					Scroll to the <span class="emphasis"><em>Action Log Storage Configuration</em></span> setting and select <span class="emphasis"><em>Elasticsearch</em></span> instead of <span class="emphasis"><em>Database</em></span>. The following figure shows the Elasticsearch settings that appear:
				</p><p class="simpara">
					<span class="inlinemediaobject"><img src="images/elasticsearch_action_logs.png" alt="Choose Elasticsearch to view settings to store logs"/></span>
				</p></li><li class="listitem"><p class="simpara">
					Fill in the following information for your Elasticsearch instance:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Elasticsearch hostname</strong></span>: The hostname or IP address of the system providing the Elasticsearch service.
						</li><li class="listitem">
							<span class="strong strong"><strong>Elasticsearch port</strong></span>: The port number providing the Elasticsearch service on the host you just entered. Note that the port must be accessible from all systems running the Red Hat Quay registry. The default is TCP port 9200.
						</li><li class="listitem">
							<span class="strong strong"><strong>Elasticsearch access key</strong></span>: The access key needed to gain access to the Elastic search service, if required.
						</li><li class="listitem">
							<span class="strong strong"><strong>Elasticsearch secret key</strong></span>: The secret key needed to gain access to the Elastic search service, if required.
						</li><li class="listitem">
							<span class="strong strong"><strong>AWS region</strong></span>: If you are running on AWS, set the AWS region (otherwise, leave it blank).
						</li><li class="listitem">
							<span class="strong strong"><strong>Index prefix</strong></span>: Choose a prefix to attach to log entries.
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Logs Producer</strong></span>: Choose either Elasticsearch (default) or Kinesis to direct logs to an intermediate Kinesis stream on AWS. You need to set up your own pipeline to send logs from Kinesis to Elasticsearch (for example, Logstash). The following figure shows additional fields you would need to fill in for Kinesis:
						</p><p class="simpara">
							<span class="inlinemediaobject"><img src="images/kinesis_producer.png" alt="On AWS"/></span>
						</p></li></ul></div></li><li class="listitem"><p class="simpara">
					If you chose Elasticsearch as the Logs Producer, no further configuration is needed. If you chose Kinesis, fill in the following:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Stream name</strong></span>: The name of the Kinesis stream.
						</li><li class="listitem">
							<span class="strong strong"><strong>AWS access key</strong></span>: The name of the AWS access key needed to gain access to the Kinesis stream, if required.
						</li><li class="listitem">
							<span class="strong strong"><strong>AWS secret key</strong></span>: The name of the AWS secret key needed to gain access to the Kinesis stream, if required.
						</li><li class="listitem">
							<span class="strong strong"><strong>AWS region</strong></span>: The AWS region.
						</li></ul></div></li><li class="listitem">
					When you are done, save the configuration. The Config Tool checks your settings. If there is a problem connecting to the Elasticsearch or Kinesis services, you will see an error and have the opportunity to continue editing. Otherwise, logging will begin to be directed to your Elasticsearch configuration after the cluster restarts with the new configuration.
				</li></ol></div></section><section class="chapter" id="clair-v4"><div class="titlepage"><div><div><h1 class="title">Chapter 6. Clair Security Scanning</h1></div></div></div><section class="section" id="what_is_clair"><div class="titlepage"><div><div><h2 class="title">6.1. What is Clair?</h2></div></div></div><p>
				Clair is a set of micro services that can be used with Red Hat Quay to perform vulnerability scanning of container images associated with a set of Linux operating systems. The micro services design of Clair makes it appropriate to run in a highly scalable configuration, where components can be scaled separately as appropriate for enterprise environments.
			</p><p>
				Clair uses the following vulnerability databases to scan for issues in your images:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Alpine SecDB database
					</li><li class="listitem">
						AWS UpdateInfo
					</li><li class="listitem">
						Debian Oval database
					</li><li class="listitem">
						Oracle Oval database
					</li><li class="listitem">
						RHEL Oval database
					</li><li class="listitem">
						SUSE Oval database
					</li><li class="listitem">
						Ubuntu Oval database
					</li><li class="listitem">
						Pyup.io (python) database
					</li></ul></div><p>
				For information on how Clair does security mapping with the different databases, see <a class="link" href="https://quay.github.io/claircore/concepts/severity_mapping.html">ClairCore Severity Mapping</a>.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					With the release of Red Hat Quay 3.4, the new Clair V4 (image registry.redhat.io/quay/clair-rhel8 fully replaces the prior Clair V2 (image quay.io/redhat/clair-jwt). See below for how to run V2 in read-only mode while V4 is updating.
				</p></div></div></section><section class="section" id="setting_up_clair_on_a_red_hat_quay_openshift_deloyment"><div class="titlepage"><div><div><h2 class="title">6.2. Setting Up Clair on a Red Hat Quay OpenShift deloyment</h2></div></div></div><section class="section" id="deploying_via_the_quay_operator"><div class="titlepage"><div><div><h3 class="title">6.2.1. Deploying Via the Quay Operator</h3></div></div></div><p>
					To set up Clair V4 on a new Red Hat Quay deployment on OpenShift, it is highly recommended to use the Quay Operator. By default, the Quay Operator will install or upgrade a Clair deployment along with your Red Hat Quay deployment and configure Clair security scanning automatically.
				</p></section><section class="section" id="manually_deploying_clair"><div class="titlepage"><div><div><h3 class="title">6.2.2. Manually Deploying Clair</h3></div></div></div><p>
					To configure Clair V4 on an existing Red Hat Quay OpenShift deployment running Clair V2, first ensure Red Hat Quay has been upgraded to at least version 3.4.0. Then use the following steps to manually set up Clair V4 alongside Clair V2.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Set your current project to the name of the project in which Red Hat Quay is running. For example:
						</p><pre class="screen">$ oc project quay-enterprise</pre></li><li class="listitem"><p class="simpara">
							Create a Postgres deployment file for Clair v4 (for example, <code class="literal">clairv4-postgres.yaml</code>) as follows.
						</p><div class="formalpara"><p class="title"><strong>clairv4-postgres.yaml</strong></p><p>
								
<pre class="programlisting language-yaml">---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: clairv4-postgres
  namespace: quay-enterprise
  labels:
    quay-component: clairv4-postgres
spec:
  replicas: 1
  selector:
    matchLabels:
      quay-component: clairv4-postgres
  template:
    metadata:
      labels:
        quay-component: clairv4-postgres
    spec:
      volumes:
        - name: postgres-data
          persistentVolumeClaim:
            claimName: clairv4-postgres
      containers:
        - name: postgres
          image: postgres:11.5
          imagePullPolicy: "IfNotPresent"
          ports:
            - containerPort: 5432
          env:
            - name: POSTGRES_USER
              value: "postgres"
            - name: POSTGRES_DB
              value: "clair"
            - name: POSTGRES_PASSWORD
              value: "postgres"
            - name: PGDATA
              value: "/etc/postgres/data"
          volumeMounts:
            - name: postgres-data
              mountPath: "/etc/postgres"
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: clairv4-postgres
  labels:
    quay-component: clairv4-postgres
spec:
  accessModes:
    - "ReadWriteOnce"
  resources:
    requests:
      storage: "5Gi"
    volumeName: "clairv4-postgres"
---
apiVersion: v1
kind: Service
metadata:
  name: clairv4-postgres
  labels:
    quay-component: clairv4-postgres
spec:
  type: ClusterIP
  ports:
    - port: 5432
      protocol: TCP
      name: postgres
      targetPort: 5432
  selector:
    quay-component: clairv4-postgres</pre>
							</p></div></li><li class="listitem"><p class="simpara">
							Deploy the postgres database as follows:
						</p><pre class="screen">$ oc create -f ./clairv4-postgres.yaml</pre></li><li class="listitem"><p class="simpara">
							Create a Clair <code class="literal">config.yaml</code> file to use for Clair v4. For example:
						</p><div class="formalpara"><p class="title"><strong>config.yaml</strong></p><p>
								
<pre class="programlisting language-yaml">introspection_addr: :8089
http_listen_addr: :8080
log_level: debug
indexer:
  connstring: host=clairv4-postgres port=5432 dbname=clair user=postgres password=postgres sslmode=disable
  scanlock_retry: 10
  layer_scan_concurrency: 5
  migrations: true
matcher:
  connstring: host=clairv4-postgres port=5432 dbname=clair user=postgres password=postgres sslmode=disable
  max_conn_pool: 100
  run: ""
  migrations: true
  indexer_addr: clair-indexer
# tracing and metrics
trace:
  name: "jaeger"
  probability: 1
  jaeger:
    agent_endpoint: "localhost:6831"
    service_name: "clair"
metrics:
  name: "prometheus"</pre>
							</p></div></li></ol></div><p>
					More information about Clair’s configuration format can be found in <a class="link" href="https://quay.github.io/clair/reference/config.html">upstream Clair documentation</a>.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a secret from the Clair <code class="literal">config.yaml</code>:
						</p><pre class="screen">$ oc create secret generic clairv4-config-secret --from-file=./config.yaml</pre></li><li class="listitem"><p class="simpara">
							Create the Clair v4 deployment file (for example, <code class="literal">clair-combo.yaml</code>) and modify it as necessary:
						</p><div class="formalpara"><p class="title"><strong>clair-combo.yaml</strong></p><p>
								
<pre class="programlisting language-yaml">---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    quay-component: clair-combo
  name: clair-combo
spec:
  replicas: 1
  selector:
    matchLabels:
      quay-component: clair-combo
  template:
    metadata:
      labels:
        quay-component: clair-combo
    spec:
      containers:
        - image: registry.redhat.io/quay/clair-rhel8:v3.5.1  <span id="CO1-1"/><span class="callout">1</span>
          imagePullPolicy: IfNotPresent
          name: clair-combo
          env:
            - name: CLAIR_CONF
              value: /clair/config.yaml
            - name: CLAIR_MODE
              value: combo
          ports:
            - containerPort: 8080
              name: clair-http
              protocol: TCP
            - containerPort: 8089
              name: clair-intro
              protocol: TCP
          volumeMounts:
            - mountPath: /clair/
              name: config
      imagePullSecrets:
        - name: redhat-pull-secret
      restartPolicy: Always
      volumes:
        - name: config
          secret:
            secretName: clairv4-config-secret
---
apiVersion: v1
kind: Service
metadata:
  name: clairv4 <span id="CO1-2"/><span class="callout">2</span>
  labels:
    quay-component: clair-combo
spec:
  ports:
    - name: clair-http
      port: 80
      protocol: TCP
      targetPort: 8080
    - name: clair-introspection
      port: 8089
      protocol: TCP
      targetPort: 8089
  selector:
    quay-component: clair-combo
  type: ClusterIP</pre>
							</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Change image to latest clair image name and version.
								</div></dd><dt><a href="#CO1-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									With the Service set to clairv4, the scanner endpoint for Clair v4 is entered later into the Red Hat Quay config.yaml in the <code class="literal">SECURITY_SCANNER_V4_ENDPOINT</code> as <code class="literal"><a class="link" href="http://clairv4">http://clairv4</a></code>.
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Create the Clair v4 deployment as follows:
						</p><pre class="screen">$ oc create -f ./clair-combo.yaml</pre></li><li class="listitem"><p class="simpara">
							Modify the <code class="literal">config.yaml</code> file for your Red Hat Quay deployment to add the following entries at the end:
						</p><pre class="programlisting language-yaml">FEATURE_SECURITY_SCANNER: true
SECURITY_SCANNER_V4_ENDPOINT: http://clairv4 <span id="CO2-1"/><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO2-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Identify the Clair v4 service endpoint
								</div></dd></dl></div></li><li class="listitem"><p class="simpara">
							Redeploy the modified <code class="literal">config.yaml</code> to the secret containing that file (for example, <code class="literal">quay-enterprise-config-secret</code>:
						</p><pre class="screen">$ oc delete secret quay-enterprise-config-secret
$ oc create secret generic quay-enterprise-config-secret --from-file=./config.yaml</pre></li><li class="listitem">
							For the new <code class="literal">config.yaml</code> to take effect, you need to restart the Red Hat Quay pods. Simply deleting the <code class="literal">quay-app</code> pods causes pods with the updated configuration to be deployed.
						</li></ol></div><p>
					At this point, images in any of the organizations identified in the namespace whitelist will be scanned by Clair v4.
				</p></section></section><section class="section" id="setting_up_clair_on_a_non_openshift_red_hat_quay_deployment"><div class="titlepage"><div><div><h2 class="title">6.3. Setting up Clair on a non-OpenShift Red Hat Quay deployment</h2></div></div></div><p>
				For Red Hat Quay deployments not running on OpenShift, it is possible to configure Clair security scanning manually. Red Hat Quay deployments already running Clair V2 can use the instructions below to add Clair V4 to their deployment.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Deploy a (preferably fault-tolerant) Postgres database server. Note that Clair requires the <code class="literal">uuid-ossp</code> extension to be added to its Postgres database. If the user supplied in Clair’s <code class="literal">config.yaml</code> has the necessary privileges to create the extension then it will be added automatically by Clair itself. If not, then the extension must be added before starting Clair. If the extension is not present, the following error will be displayed when Clair attempts to start.
					</p><pre class="screen">ERROR: Please load the "uuid-ossp" extension. (SQLSTATE 42501)</pre></li><li class="listitem"><p class="simpara">
						Create a Clair config file in a specific folder (e.g. <code class="literal">/etc/clairv4/config/config.yaml</code>) file.
					</p><div class="formalpara"><p class="title"><strong>config.yaml</strong></p><p>
							
<pre class="programlisting language-yaml">introspection_addr: :8089
http_listen_addr: :8080
log_level: debug
indexer:
  connstring: host=clairv4-postgres port=5432 dbname=clair user=postgres password=postgres sslmode=disable
  scanlock_retry: 10
  layer_scan_concurrency: 5
  migrations: true
matcher:
  connstring: host=clairv4-postgres port=5432 dbname=clair user=postgres password=postgres sslmode=disable
  max_conn_pool: 100
  run: ""
  migrations: true
  indexer_addr: clair-indexer
notifier:
  connstring: host=clairv4-postgres port=5432 dbname=clair user=postgres password=postgres sslmode=disable
  delivery_interval: 1m
  poll_interval: 5m
  migrations: true

# tracing and metrics
trace:
  name: "jaeger"
  probability: 1
  jaeger:
    agent_endpoint: "localhost:6831"
    service_name: "clair"
metrics:
  name: "prometheus"</pre>
						</p></div></li></ol></div><p>
				More information about Clair’s configuration format can be found in <a class="link" href="https://quay.github.io/clair/reference/config.html">upstream Clair documentation</a>.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Run Clair via the container image, mounting in the configuration from the file you created.
					</p><pre class="screen">$ podman run -p 8080:8080 -p 8089:8089 -e CLAIR_CONF=/clair/config.yaml -e CLAIR_MODE=combo -v /etc/clair4/config:/clair -d registry.redhat.io/quay/clair-rhel8:v3.5.1</pre></li><li class="listitem">
						Follow the remaining instructions from the previous section for configuring Red Hat Quay to use the new Clair V4 endpoint.
					</li></ol></div><p>
				Running multiple Clair containers in this fashion is also possible, but for deployment scenarios beyond a single container the use of a container orchestrator like Kubernetes or OpenShift is strongly recommended.
			</p></section><section class="section" id="using_clair"><div class="titlepage"><div><div><h2 class="title">6.4. Using Clair</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Log in to your Red Hat Quay cluster and select an organization for which you have configured Clair scanning.
					</li><li class="listitem"><p class="simpara">
						Select a repository from that organization that holds some images and select Tags from the left navigation. The following figure shows an example of a repository with two images that have been scanned:
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="images/clair-reposcan.png" alt="Security scan information appears for scanned repository images"/></span>
					</p></li><li class="listitem"><p class="simpara">
						If vulnerabilities are found, select to under the Security Scan column for the image to see either all vulnerabilities or those that are fixable. The following figure shows information on all vulnerabilities found:
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="images/clair-vulnerabilities.png" alt="See all vulnerabilities or only those that are fixable"/></span>
					</p></li></ol></div></section><section class="section" id="clair_notifications"><div class="titlepage"><div><div><h2 class="title">6.5. Clair Notifications</h2></div></div></div><p>
				When Clair received a new vulnerability affecting a previously indexed manifest, it will notify Red Hat Quay so that a new scan can be requested. Only the most severe vulnerabilities trigger a notification to avoid excessive scan requests. This notification mechanism is automatically set up when Clair is configured in Red Hat Quay’s configuration.
			</p><p>
				Clair notifications can also be set up for external consumption via AMQP and STOMP protocols. For details on how to set this up please consult the <a class="link" href="https://quay.github.io/clair/concepts/notifications.html">upstream Clair documentation</a>.
			</p></section><section class="section" id="configuring_clair_for_disconnected_environments"><div class="titlepage"><div><div><h2 class="title">6.6. Configuring Clair for Disconnected Environments</h2></div></div></div><p>
				Clair utilizes a set of components called Updaters to handle the fetching and parsing of data from various vulnerability databases. These Updaters are set up by default to pull vulnerability data directly from the internet and work out of the box. For customers in disconnected environments without direct access to the internet this poses a problem. Clair supports these environments through the ability to work with different types of update workflows that take into account network isolation. Using the <code class="literal">clairctl</code> command line utility, any process can easily fetch Updater data from the internet via an open host, securely transfer the data to an isolated host, and then import the Updater data on the isolated host into Clair itself.
			</p><p>
				The steps are as follows.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						First ensure that your Clair configuration has disabled automated Updaters from running.
					</p><div class="formalpara"><p class="title"><strong>config.yaml</strong></p><p>
							
<pre class="programlisting language-yaml">matcher:
  disable_updaters: true</pre>
						</p></div></li><li class="listitem"><p class="simpara">
						Export out the latest Updater data to a local archive. This requires the <code class="literal">clairctl</code> tool which can be run directly as a binary, or via the Clair container image. Assume your Clair configuration is in <code class="literal">/etc/clairv4/config/config.yaml</code>, to run via the container image:
					</p><pre class="screen">$ podman run -it --rm -v /etc/clairv4/config:/cfg:Z -v $(pwd):/updaters:Z --entrypoint /bin/clairctl registry.redhat.io/quay/clair-rhel8:v3.5.1 export-updaters --config /cfg/config.yaml /updaters/updaters.gz</pre><p class="simpara">
						Note that you need to explicitly reference the Clair configuration. This will create the Updater archive in <code class="literal">/etc/clairv4/updaters/updaters.gz</code>. If you want to ensure the archive was created without any errors from the source databases, you can supply the <code class="literal">--strict</code> flag to <code class="literal">clairctl</code>. The archive file should be copied over to a volume that is accessible from the disconnected host running Clair. From the disconnected host, use the same procedure now to import the archive into Clair.
					</p><pre class="screen">$ podman run -it --rm -v /etc/clairv4/config:/cfg:Z -v $(pwd):/updaters:Z --entrypoint /bin/clairctl registry.redhat.io/quay/clair-rhel8:v3.5.1 import-updaters --config /cfg/config.yaml /updaters/updaters.gz</pre></li></ol></div></section><section class="section" id="clair_updater_urls"><div class="titlepage"><div><div><h2 class="title">6.7. Clair updater URLs</h2></div></div></div><p>
				The following are the HTTP hosts and paths that Clair will attempt to talk to in a default configuration. This list is non-exhaustive, as some servers will issue redirects and some request URLs are constructed dynamically.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						https://secdb.alpinelinux.org/
					</li><li class="listitem">
						http://repo.us-west-2.amazonaws.com/2018.03/updates/x86_64/mirror.list
					</li><li class="listitem">
						https://cdn.amazonlinux.com/2/core/latest/x86_64/mirror.list
					</li><li class="listitem">
						https://www.debian.org/security/oval/
					</li><li class="listitem">
						https://linux.oracle.com/security/oval/
					</li><li class="listitem">
						https://packages.vmware.com/photon/photon_oval_definitions/
					</li><li class="listitem">
						https://github.com/pyupio/safety-db/archive/
					</li><li class="listitem">
						https://catalog.redhat.com/api/containers/
					</li><li class="listitem">
						https://www.redhat.com/security/data/
					</li><li class="listitem">
						https://support.novell.com/security/oval/
					</li><li class="listitem">
						https://people.canonical.com/~ubuntu-security/oval/
					</li></ul></div></section><section class="section" id="additional_information"><div class="titlepage"><div><div><h2 class="title">6.8. Additional Information</h2></div></div></div><p>
				For detailed documentation on the internals of Clair, including how the microservices are structured, please see the <a class="link" href="https://quay.github.io/clair">Upstream Clair</a> and <a class="link" href="https://quay.github.io/claircore">ClairCore</a> documentation.
			</p></section></section><section class="chapter" id="container-security-operator-setup"><div class="titlepage"><div><div><h1 class="title">Chapter 7. Scan pod images with the Container Security Operator</h1></div></div></div><p>
			Using the <a class="link" href="https://operatorhub.io/operator/container-security-operator">Container Security Operator</a>, (CSO) you can scan container images associated with active pods, running on OpenShift (4.2 or later) and other Kubernetes platforms, for known vulnerabilities. The CSO:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Watches containers associated with pods on all or specified namespaces
				</li><li class="listitem">
					Queries the container registry where the containers came from for vulnerability information provided an image’s registry supports image scanning (such as a Quay registry with Clair scanning)
				</li><li class="listitem">
					Exposes vulnerabilities via the ImageManifestVuln object in the Kubernetes API
				</li></ul></div><p>
			Using the instructions here, the CSO is installed in the <code class="literal">marketplace-operators</code> namespace, so it is available to all namespaces on your OpenShift cluster.
		</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				To see instructions on installing the CSO on Kubernetes, select the Install button from the <a class="link" href="https://operatorhub.io/operator/container-security-operator">Container Security OperatorHub.io</a> page.
			</p></div></div><section class="section" id="run_the_cso_in_openshift"><div class="titlepage"><div><div><h2 class="title">7.1. Run the CSO in OpenShift</h2></div></div></div><p>
				To start using the CSO in OpenShift, do the following:
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Go to Operators → OperatorHub (select Security) to see the available <code class="literal">Container Security</code> Operator.
					</li><li class="listitem">
						Select the <code class="literal">Container Security</code> Operator, then select <code class="literal">Install</code> to go to the Create Operator Subscription page.
					</li><li class="listitem">
						Check the settings (all namespaces and automatic approval strategy, by default), and select <code class="literal">Subscribe</code>. The <code class="literal">Container Security</code> appears after a few moments on the <code class="literal">Installed Operators</code> screen.
					</li><li class="listitem"><p class="simpara">
						Optionally, you can add custom certificates to the CSO. In this example, create a certificate named quay.crt in the current directory. Then run the following command to add the cert to the CSO (restart the Operator pod for the new certs to take effect):
					</p><pre class="screen">$ oc create secret generic container-security-operator-extra-certs --from-file=quay.crt -n openshift-operators</pre></li><li class="listitem"><p class="simpara">
						Open the OpenShift Dashboard (Home → Dashboards). A link to Image Security appears under the status section, with a listing of the number of vulnerabilities found so far. Select the link to see a Security breakdown, as shown in the following figure:
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="images/cso-dashboard.png" alt="Access SCO scanning data from OpenShift dashboard"/></span>
					</p></li><li class="listitem"><p class="simpara">
						You can do one of two things at this point to follow up on any detected vulnerabilities:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								Select the link to the vulnerability. You are taken to the container registry, Red Hat Quay or other registry where the container came from, where you can see information about the vulnerability. The following figure shows an example of detected vulnerabilities from a Quay.io registry:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="images/cso-registry-vulnerable.png" alt="The CSO points you to a registry containing the vulnerable image"/></span>
							</p></li><li class="listitem"><p class="simpara">
								Select the namespaces link to go to the ImageManifestVuln screen, where you can see the name of the selected image and all namespaces where that image is running. The following figure indicates that a particular vulnerable image is running in two namespaces:
							</p><p class="simpara">
								<span class="inlinemediaobject"><img src="images/cso-namespace-vulnerable.png" alt="View namespaces a vulnerable image is running in"/></span>
							</p></li></ul></div></li></ol></div><p>
				At this point, you know what images are vulnerable, what you need to do to fix those vulnerabilities, and every namespace that the image was run in. So you can:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Alert anyone running the image that they need to correct the vulnerability
					</li><li class="listitem">
						Stop the images from running (by deleting the deployment or other object that started the pod the image is in)
					</li></ul></div><p>
				Note that if you do delete the pod, it may take a few minutes for the vulnerability to reset on the dashboard.
			</p></section><section class="section" id="query_image_vulnerabilities_from_the_cli"><div class="titlepage"><div><div><h2 class="title">7.2. Query image vulnerabilities from the CLI</h2></div></div></div><p>
				You can query information on security from the command line. To query for detected vulnerabilities, type:
			</p><pre class="screen">$ oc get vuln --all-namespaces
NAMESPACE     NAME              AGE
default       sha256.ca90...    6m56s
skynet        sha256.ca90...    9m37s</pre><p>
				To display details for a particular vulnerability, identify one of the vulnerabilities, along with its namespace and the <code class="literal">describe</code> option. This example shows an active container whose image includes an RPM package with a vulnerability:
			</p><pre class="screen">$ oc describe vuln --namespace mynamespace sha256.ac50e3752...
Name:         sha256.ac50e3752...
Namespace:    quay-enterprise
...
Spec:
  Features:
    Name:            nss-util
    Namespace Name:  centos:7
    Version:         3.44.0-3.el7
    Versionformat:   rpm
    Vulnerabilities:
      Description: Network Security Services (NSS) is a set of libraries...</pre></section></section><section class="chapter" id="quay-bridge-operator"><div class="titlepage"><div><div><h1 class="title">Chapter 8. Integrate Red Hat Quay into OpenShift with the Bridge Operator</h1></div></div></div><p>
			Using the Quay Bridge Operator, you can replace the integrated container registry in OpenShift with a Red Hat Quay registry. By doing this, your integrated OpenShift registry becomes a highly available, enterprise-grade Red Hat Quay registry with enhanced role based access control (RBAC) features.
		</p><p>
			The primary goals of the Bridge Operator is to duplicate the features of the integrated OpenShift registry in the new Red Hat Quay registry. The features enabled with this Operator include:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					Synchronizing OpenShift namespaces as Red Hat Quay organizations.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							Creating Robot accounts for each default namespace service account
						</li><li class="listitem">
							Creating Secrets for each created Robot Account (associating each Robot Secret to a Service Account as Mountable and Image Pull Secret)
						</li><li class="listitem">
							Synchronizing OpenShift ImageStreams as Quay Repositories
						</li></ul></div></li><li class="listitem">
					Automatically rewriting new Builds making use of ImageStreams to output to Red Hat Quay
				</li><li class="listitem">
					Automatically importing an ImageStream tag once a build completes
				</li></ul></div><p>
			Using this procedure with the Quay Bridge Operator, you enable bi-directional communication between your Red Hat Quay and OpenShift clusters.
		</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
				You cannot have more than one OpenShift Container Platform cluster pointing to the same Red Hat Quay instance from a Quay Bridge Operator. If you did, it would prevent you from creating namespaces of the same name on the two clusters.
			</p></div></div><section class="section" id="running_the_quay_bridge_operator"><div class="titlepage"><div><div><h2 class="title">8.1. Running the Quay Bridge Operator</h2></div></div></div><section class="section" id="prerequisites-1"><div class="titlepage"><div><div><h3 class="title">8.1.1. Prerequisites</h3></div></div></div><p>
					Before setting up the Bridge Operator, have the following in place:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							An existing Red Hat Quay environment for which you have superuser permissions
						</li><li class="listitem">
							A Red Hat OpenShift Container Platform environment (4.2 or later is recommended) for which you have cluster administrator permissions
						</li><li class="listitem">
							An OpenShift command line tool (<code class="literal">oc</code> command)
						</li></ul></div></section><section class="section" id="setting_up_and_configuring_openshift_and_red_hat_quay"><div class="titlepage"><div><div><h3 class="title">8.1.2. Setting up and configuring OpenShift and Red Hat Quay</h3></div></div></div><p>
					Both Red Hat Quay and OpenShift configuration is required:
				</p><section class="section" id="red_hat_quay_setup"><div class="titlepage"><div><div><h4 class="title">8.1.2.1. Red Hat Quay setup</h4></div></div></div><p>
						Create a dedicated Red Hat Quay organization, and from a new application you create within that organization, generate an OAuth token to be used with the Quay Bridge Operator in OpenShift
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Log in to Red Hat Quay as a user with superuser access and select the organization for which the external application will be configured.
							</li><li class="listitem">
								In the left navigation, select Applications.
							</li><li class="listitem">
								Select <code class="literal">Create New Application</code> and entering a name for the new application (for example, <code class="literal">openshift</code>).
							</li><li class="listitem">
								With the new application displayed, select it.
							</li><li class="listitem">
								In the left navigation, select <code class="literal">Generate Token</code> to create a new OAuth2 token.
							</li><li class="listitem">
								Select all checkboxes to grant the access needed for the integration.
							</li><li class="listitem">
								Review the assigned permissions and then select <code class="literal">Authorize Application</code>, then confirm it.
							</li><li class="listitem">
								Copy and save the generated Access Token that appears to use in the next section.
							</li></ol></div></section><section class="section" id="openshift_setup"><div class="titlepage"><div><div><h4 class="title">8.1.2.2. OpenShift Setup</h4></div></div></div><p>
						Setting up OpenShift for the Quay Bridge Operator requires several steps, including:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<span class="strong strong"><strong>Creating an OpenShift secret</strong></span>: Using the OAuth token created earlier in Quay, create an OpenShift secret.
							</li><li class="listitem">
								<span class="strong strong"><strong>Adding MutatingWebhookConfiguration support</strong></span>: To support Red Hat Quay integration with OpenShift, any new Build requests should be intercepted so that the output can be modified to target Red Hat Quay instead of OpenShift’s integrated registry.
							</li></ul></div><p>
						Support for dynamic interception of API requests that are performed as part of OpenShift’s typical build process is facilitated through a MutatingWebhookConfiguration. A MutatingWebhookConfiguration allows for invoking an API running within a project on OpenShift when certain API requests are received.
					</p><p>
						Kubernetes requires that the webhook endpoint is secured via SSL using a certificate that makes use of the certificate authority for the cluster. Fortunately, OpenShift provides support for generating a certificate signed by the cluster.
					</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
								Using the OpenShift <code class="literal">oc</code> command line tool, log in to OpenShift as a cluster administrator.
							</li><li class="listitem">
								Choose an OpenShift namespace to use, such as <code class="literal">openshift-operators</code> or create a new one.
							</li><li class="listitem"><p class="simpara">
								Create an OpenShift secret, replacing &lt;access_token&gt; with the Access Token obtained earlier from Red Hat Quay. For example, this creates a secret with your &lt;access_token&gt; called <code class="literal">quay-integration</code> with a key called <code class="literal">token</code>:
							</p><pre class="screen">$ oc create secret generic quay-integration --from-literal=token=&lt;access_token&gt;</pre><p class="simpara">
								The result places the newly created private key and certificate within a secret specified. The secret will be mounted into the appropriate located within the operator as declared in the Deployment of the Operator.
							</p></li><li class="listitem"><p class="simpara">
								Create a Service for the Operator’s webhook endpoint:
							</p><div class="formalpara"><p class="title"><strong>quay-webhook.yaml</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: v1
kind: Service
metadata:
  labels:
    name: quay-bridge-operator
  name: quay-bridge-operator
  namespace: openshift-operators
spec:
  ports:
    - name: https
      port: 443
      protocol: TCP
      targetPort: 8443
  selector:
    name: quay-bridge-operator
  sessionAffinity: None
  type: ClusterIP</pre>
								</p></div></li><li class="listitem"><p class="simpara">
								Create the webhook service as follows:
							</p><pre class="screen">$ oc create -f quay-webhook.yaml</pre></li><li class="listitem">
								Download the <a class="link" href="https://github.com/redhat-cop/quay-openshift-registry-operator/blob/master/hack/webhook-create-signed-cert.sh">webhook-create-signed-cert.sh</a> script, so you can use it to generate a certificate signed by a Kubernetes certificate authority.
							</li><li class="listitem"><p class="simpara">
								Execute the following command to request the certificate:
							</p><pre class="screen">$ ./webhook-create-signed-cert.sh --namespace openshift-operators \
   --secret quay-bridge-operator-webhook-certs \
   --service quay-bridge-operator</pre></li><li class="listitem"><p class="simpara">
								Execute the following command to retrieve the CA and format the result as a single line so that it can be entered into the MutatingWebhookConfiguration resource:
							</p><pre class="screen">$ oc get configmap -n kube-system \
   extension-apiserver-authentication \
   -o=jsonpath='{.data.client-ca-file}' | base64 | tr -d '\n'</pre></li><li class="listitem"><p class="simpara">
								Replace the ${CA_BUNDLE} variable in the following MutatingWebhookConfiguration YAML:
							</p><div class="formalpara"><p class="title"><strong>quay-mutating-webhook.yaml</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: admissionregistration.k8s.io/v1beta1
kind: MutatingWebhookConfiguration
metadata:
  name: quay-bridge-operator
webhooks:
  - name: quayintegration.redhatcop.redhat.io
    clientConfig:
      service:
        namespace: openshift-operators
        name: quay-bridge-operator
        path: "/admissionwebhook"
      caBundle: "${CA_BUNDLE}" <span id="CO3-1"/><span class="callout">1</span>
    rules:
    - operations:  [ "CREATE" ]
      apiGroups: [ "build.openshift.io" ]
      apiVersions: ["v1" ]
      resources: [ "builds" ]
    failurePolicy: Fail</pre>
								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO3-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Replace ${CA_BUNDLE} with the output of the previous step. It will appear as one long line that you copy and paste to replace ${CA_BUNDLE}.
									</div></dd></dl></div></li><li class="listitem"><p class="simpara">
								Create the MutatingWebhookConfiguration as follows:
							</p><pre class="screen">$ oc create -f quay-mutating-webhook.yaml</pre><p class="simpara">
								Until the operator is running, new requests for builds will fail since the webserver the MutatingWebhookConfiguration invokes is not available and a proper is response is required in order for the object to be persisted in etcd.
							</p></li><li class="listitem"><p class="simpara">
								Go to the OpenShift console and install the Quay Bridge Operator as follows:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										Select OperatorHub and search for Quay Bridge Operator.
									</li><li class="listitem">
										Select Install
									</li><li class="listitem">
										Choose Installation Mode (all namespaces), Update Channel, and Approval Strategy (Automatic or Manual).
									</li><li class="listitem">
										Select Subscribe
									</li></ul></div></li><li class="listitem"><p class="simpara">
								Create the custom resource (CR) called <code class="literal">QuayIntegration</code>. For example:
							</p><div class="formalpara"><p class="title"><strong>quay-integration.yaml</strong></p><p>
									
<pre class="programlisting language-yaml">apiVersion: redhatcop.redhat.io/v1alpha1
kind: QuayIntegration
metadata:
  name: example-quayintegration
spec:
  clusterID: openshift  <span id="CO4-1"/><span class="callout">1</span>
  credentialsSecretName: openshift-operators/quay-integration <span id="CO4-2"/><span class="callout">2</span>
  quayHostname: https://&lt;QUAY_URL&gt;   <span id="CO4-3"/><span class="callout">3</span>
  whitelistNamespaces: <span id="CO4-4"/><span class="callout">4</span>
    - default
  insecureRegistry: false <span id="CO4-5"/><span class="callout">5</span></pre>
								</p></div><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO4-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										The clusterID value should be unique across the entire ecosystem. This value is optional and defaults to openshift.
									</div></dd><dt><a href="#CO4-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										For credentialsSecretName, replace <code class="literal">openshift-operators/quay-integration</code> with the name of the namespace and the secret containing the token you created earlier.
									</div></dd><dt><a href="#CO4-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Replace QUAY_URL with the hostname of your Red Hat Quay instance.
									</div></dd><dt><a href="#CO4-4"><span class="callout">4</span></a> </dt><dd><div class="para">
										The whitelistNamespaces is optional. If not used, the Bridge Operator will sync all namespaces to Red Hat Quay except the openshift prefixed project. In this example, the white listed namespace (default) will now have an associated Red Hat Quay organization. Use any namespace you like here.
									</div></dd><dt><a href="#CO4-5"><span class="callout">5</span></a> </dt><dd><div class="para">
										If Quay is using self signed certificates, set the property <code class="literal">insecureRegistry: true</code>.
									</div></dd></dl></div><p class="simpara">
								The result is that organizations within Red Hat Quay should be created for the related namespaces in OpenShift.
							</p></li><li class="listitem"><p class="simpara">
								Create the <code class="literal">QuayIntegration</code> as follows:
							</p><pre class="screen">$ oc create -f quay-integration.yaml</pre></li></ol></div><p>
						At this point a Quay integration resource is created, linking the OpenShift cluster to the Red Hat Quay instance.
					</p><p>
						The whitelisted namespace you created should now have a Red Hat Quay organization. If you were to use a command such as <code class="literal">oc new-app</code> to create a new application in that namespace, you would see a new Red Hat Quay repository created for it instead of using the internal registry.
					</p></section></section></section></section><section class="chapter" id="repository_mirroring"><div class="titlepage"><div><div><h1 class="title">Chapter 9. Repository mirroring</h1></div></div></div><section class="section" id="repo-mirroring-in-red-hat-quay"><div class="titlepage"><div><div><h2 class="title">9.1. Introduction to repository mirroring in Red Hat Quay</h2></div></div></div><p>
				Red Hat Quay repository mirroring lets you mirror images from external container registries (or another local registry) into your Red Hat Quay cluster. Using repository mirroring, you can synchronize images to Red Hat Quay based on repository names and tags.
			</p><p>
				From your Red Hat Quay cluster with repository mirroring enabled, you can:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Choose a repository from an external registry to mirror
					</li><li class="listitem">
						Add credentials to access the external registry
					</li><li class="listitem">
						Identify specific container image repository names and tags to sync
					</li><li class="listitem">
						Set intervals at which a repository is synced
					</li><li class="listitem">
						Check the current state of synchronization
					</li></ul></div><p>
				To use the mirroring functionality, you need to:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Enable Repository Mirroring in the Red Hat Quay configuration tool
					</li><li class="listitem">
						Run a repository mirroring worker
					</li><li class="listitem">
						Create mirrored repositories in the Red Hat Quay UI
					</li></ul></div></section><section class="section" id="repository_mirroring_vs_georeplication"><div class="titlepage"><div><div><h2 class="title">9.2. Repository Mirroring vs. Georeplication</h2></div></div></div><p>
				With repository mirroring, you mirror a specific subset of content, between two or more distinct registries, to selected datacenters, clusters, or regions. By contrast, Georeplication provides a single, globally distributed Red Hat Quay to serve container images from localized storage. The two approaches to sharing content differ in the following ways:
			</p><div class="table" id="idm45584195010944"><p class="title"><strong>Table 9.1. Red Hat Quay Repository Mirroring vs. Georeplication</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 33%; " class="col_1"/><col style="width: 33%; " class="col_2"/><col style="width: 33%; " class="col_3"/></colgroup><tbody><tr><td align="left" valign="top">
							<p>
								Feature / Capability
							</p>
							</td><td align="left" valign="top">
							<p>
								Georeplication
							</p>
							</td><td align="left" valign="top">
							<p>
								Repository Mirroring
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								What is the feature designed to do?
							</p>
							</td><td align="left" valign="top">
							<p>
								A shared, global registry
							</p>
							</td><td align="left" valign="top">
							<p>
								Distinct, different registries
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								What happens if replication or mirroring hasn’t been completed yet?
							</p>
							</td><td align="left" valign="top">
							<p>
								The remote copy is used (slower)
							</p>
							</td><td align="left" valign="top">
							<p>
								No image is served
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								Is access to all storage backends in both regions required?
							</p>
							</td><td align="left" valign="top">
							<p>
								Yes (all Red Hat Quay nodes)
							</p>
							</td><td align="left" valign="top">
							<p>
								No (distinct storage)
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								Can users push images from both sites to the same repository?
							</p>
							</td><td align="left" valign="top">
							<p>
								Yes
							</p>
							</td><td align="left" valign="top">
							<p>
								No
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								Is all registry content and configuration identical across all regions (shared database)
							</p>
							</td><td align="left" valign="top">
							<p>
								Yes
							</p>
							</td><td align="left" valign="top">
							<p>
								No
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								Can users select individual namespaces or repositories to be mirrored?
							</p>
							</td><td align="left" valign="top">
							<p>
								No,by default
							</p>
							</td><td align="left" valign="top">
							<p>
								Yes
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								Can users apply filters to synchronization rules?
							</p>
							</td><td align="left" valign="top">
							<p>
								No
							</p>
							</td><td align="left" valign="top">
							<p>
								Yes
							</p>
							</td></tr></tbody></table></div></div></section><section class="section" id="using_repository_mirroring"><div class="titlepage"><div><div><h2 class="title">9.3. Using repository mirroring</h2></div></div></div><p>
				Here are a few tips for using Red Hat Quay repository mirroring:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						With repository mirroring, you can mirror an entire repository or selectively limit which images are synced based on a comma-separated list of tags, a range of tags, or other means of identifying tags through regular expressions and globs.
					</li><li class="listitem">
						Once set as a mirrored repository, you cannot manually add other images to that repository.
					</li><li class="listitem">
						Because the mirrored repository is based on the repository and tags you set, it will hold only the content represented by the repo/tag pair. In other words, if you change the tag so that some images in the repository don’t match any more, those images will be deleted.
					</li><li class="listitem">
						Only the designated robot can push images to a mirrored repository, superseding any role-based access control permissions set on the repository.
					</li><li class="listitem">
						With a mirrored repository, a user can pull images (given read permission) from the repository but not push images to the repository.
					</li><li class="listitem">
						Changing setting on your mirrored repository is done from a Mirrors tab on the Repositories page for the mirrored repository you create.
					</li><li class="listitem">
						Images are synced at set intervals, but can also be synced on demand.
					</li></ul></div></section><section class="section" id="mirroring_configuration"><div class="titlepage"><div><div><h2 class="title">9.4. Mirroring configuration</h2></div></div></div><p>
				Start the Quay container in configuration mode and select the Enable Repository Mirroring check box. If you want to require HTTPS communications and verify certificates during mirroring, select the HTTPS and cert verification check box.
			</p><p>
				<span class="inlinemediaobject"><img src="images/repo_mirror_config.png" alt="Enable mirroring and require HTTPS and verified certificates"/></span>
			</p><p>
				Validate and download the configuration, and then restart Quay in registry mode, using the updated config file.
			</p></section><section class="section" id="mirroring_worker"><div class="titlepage"><div><div><h2 class="title">9.5. Mirroring worker</h2></div></div></div><p>
				To run the repository mirroring worker, start a quay pod with the <code class="literal">repomirror</code> option:
			</p><pre class="screen">$ sudo podman run -d --name mirroring-worker \
  -v $QUAY/config:/conf/stack \
  registry.redhat.io/quay/quay-rhel8:v3.5.1 repomirror</pre><p>
				If you have configured TLS communications using a certificate <code class="literal">/root/ca.crt</code>, then the following example shows how to start the mirroring worker:
			</p><pre class="screen">$ sudo podman run -d --name mirroring-worker \
  -v $QUAY/config:/conf/stack \
  -v /root/ca.crt:/etc/pki/ca-trust/source/anchors/ca.crt \
  registry.redhat.io/quay/quay-rhel8:v3.5.1 repomirror</pre></section><section class="section" id="create-mirrored-repo"><div class="titlepage"><div><div><h2 class="title">9.6. Creating a mirrored repository</h2></div></div></div><p>
				The steps shown in this section assume you already have enabled repository mirroring in the configuration for your Red Hat Quay cluster and that you have a deployed a mirroring worker.
			</p><p>
				To mirror a repository from an external container registry, create a new repository, typically with the same name as the target repo, for example, <code class="literal">quay-rhel8</code>.
			</p><section class="section" id="repository_mirroring_settings"><div class="titlepage"><div><div><h3 class="title">9.6.1. Repository mirroring settings</h3></div></div></div><p>
					In the Settings tab, set the Repository State to <code class="literal">Mirror</code>:
				</p><p>
					<span class="inlinemediaobject"><img src="images/repo_mirror_create.png" alt="Create a new Red Hat Quay repo mirror"/></span>
				</p><p>
					In the Mirror tab, enter the details for connecting to the external registry, along with the tags, scheduling and access information:
				</p><p>
					<span class="inlinemediaobject"><img src="images/repo-mirror-details-start.png" alt="Repository mirroring"/></span>
				</p><p>
					Enter the details as required in the following fields:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Registry Location:</strong></span> The external repository you want to mirror, for example, <code class="literal">registry.redhat.io/quay/quay-rhel8</code>
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Tags:</strong></span> This field is required. You may enter a comma-separated list of individual tags or tag patterns. (See <span class="emphasis"><em>Tag Patterns</em></span> section for details.)
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								In order for Quay to get the list of tags in the remote repository, one of the following requirements must be met:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										An image with the "latest" tag must exist in the remote repository <span class="emphasis"><em>OR</em></span>
									</li><li class="listitem">
										At least one explicit tag, without pattern matching, must exist in the list of tags that you specify
									</li></ul></div></div></div></li><li class="listitem">
							<span class="strong strong"><strong>Start Date:</strong></span> The date on which mirroring begins. The current date and time is used by default.
						</li><li class="listitem">
							<span class="strong strong"><strong>Sync Interval:</strong></span> Defaults to syncing every 24 hours. You can change that based on hours or days.
						</li><li class="listitem">
							<span class="strong strong"><strong>Robot User:</strong></span> Create a new robot account or choose an existing robot account to do the mirroring.
						</li><li class="listitem">
							<span class="strong strong"><strong>Username:</strong></span> The username for accessing the external registry holding the repository you are mirroring.
						</li><li class="listitem">
							<span class="strong strong"><strong>Password:</strong></span> The password associated with the Username. Note that the password cannot include characters that require an escape character (\).
						</li></ul></div></section><section class="section" id="advanced_settings"><div class="titlepage"><div><div><h3 class="title">9.6.2. Advanced settings</h3></div></div></div><p>
					In the Advanced Settings section, configure TLS and proxy, if required:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Verify TLS:</strong></span> Check this box if you want to require HTTPS and to verify certificates, when communicating with the target remote registry.
						</li><li class="listitem">
							<span class="strong strong"><strong>HTTP Proxy:</strong></span> Identify the HTTP proxy server needed to access the remote site, if one is required.
						</li><li class="listitem">
							<span class="strong strong"><strong>HTTPS Proxy:</strong></span> Identify the HTTPS proxy server needed to access the remote site, if one is required.
						</li><li class="listitem">
							<span class="strong strong"><strong>No Proxy:</strong></span> List of locations that do not require proxy
						</li></ul></div></section><section class="section" id="synchronize_now"><div class="titlepage"><div><div><h3 class="title">9.6.3. Synchronize now</h3></div></div></div><p>
					To perform an immediate mirroring operation, press the Sync Now button on the repository’s Mirroring tab. The logs are available on the Usage Logs tab:
				</p><p>
					<span class="inlinemediaobject"><img src="images/repo-mirror-usage-logs.png" alt="Usage logs"/></span>
				</p><p>
					When the mirroring is complete, the images will appear in the Tags tab:
				</p><p>
					<span class="inlinemediaobject"><img src="images/repo-mirror-tags.png" alt="Repository mirroring tags"/></span>
				</p><p>
					Here is an example of a completed Repository Mirroring screen:
				</p><p>
					<span class="inlinemediaobject"><img src="images/repo-mirror-details.png" alt="Repository mirroring details"/></span>
				</p></section></section><section class="section" id="tag-patterns"><div class="titlepage"><div><div><h2 class="title">9.7. Tag Patterns</h2></div></div></div><p>
				As noted above, at least one Tag must be explicitly entered (ie. not a tag pattern) <span class="emphasis"><em>or</em></span> the tag "latest" must exist in the report repository. (The tag "latest" will not be synced unless specified in the tag list.). This is required for Quay to get the list of tags in the remote repository to compare to the specified list to mirror.
			</p><p>
				Pattern syntax
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><tbody><tr><td align="left" valign="top">
							<p>
								Pattern
							</p>
							</td><td align="left" valign="top">
							<p>
								Description
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								*
							</p>
							</td><td align="left" valign="top">
							<p>
								Matches all characters
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								?
							</p>
							</td><td align="left" valign="top">
							<p>
								Matches any single character
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								[seq]
							</p>
							</td><td align="left" valign="top">
							<p>
								Matches any character in <span class="emphasis"><em>seq</em></span>
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								[!seq]
							</p>
							</td><td align="left" valign="top">
							<p>
								Matches any character not in <span class="emphasis"><em>seq</em></span>
							</p>
							</td></tr></tbody></table></div><p>
				Example tag patterns
			</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><tbody><tr><td align="left" valign="top">
							<p>
								Example Pattern
							</p>
							</td><td align="left" valign="top">
							<p>
								Example Matches
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								v3*
							</p>
							</td><td align="left" valign="top">
							<p>
								v32, v3.1, v3.2, v3.2-4beta, v3.3
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								v3.*
							</p>
							</td><td align="left" valign="top">
							<p>
								v3.1, v3.2, v3.2-4beta
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								v3.?
							</p>
							</td><td align="left" valign="top">
							<p>
								v3.1, v3.2, v3.3
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								v3.[12]
							</p>
							</td><td align="left" valign="top">
							<p>
								v3.1, v3.2
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								v3.[12]*
							</p>
							</td><td align="left" valign="top">
							<p>
								v3.1, v3.2, v3.2-4beta
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								v3.[!1]*
							</p>
							</td><td align="left" valign="top">
							<p>
								v3.2, v3.2-4beta, v3.3
							</p>
							</td></tr></tbody></table></div></section><section class="section" id="working-with-mirrored-repo"><div class="titlepage"><div><div><h2 class="title">9.8. Working with mirrored repositories</h2></div></div></div><p>
				Once you have created a mirrored repository, there are several ways you can work with that repository. Select your mirrored repository from the Repositories page and do any of the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						<span class="strong strong"><strong>Enable/disable the repository</strong></span>: Select the Mirroring button in the left column, then toggle the Enabled check box to enable or disable the repository temporarily.
					</li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Check mirror logs</strong></span>: To make sure the mirrored repository is working properly, you can check the mirror logs. To do that, select the Usage Logs button in the left column. Here’s an example:
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="images/repo_mirror_logs.png" alt="View logs for your Red Hat Quay repo mirror"/></span>
					</p></li><li class="listitem">
						<span class="strong strong"><strong>Sync mirror now</strong></span>: To immediately sync the images in your repository, select the Sync Now button.
					</li><li class="listitem">
						<span class="strong strong"><strong>Change credentials</strong></span>: To change the username and password, select DELETE from the Credentials line. Then select None and add the username and password needed to log into the external registry when prompted.
					</li><li class="listitem">
						<span class="strong strong"><strong>Cancel mirroring</strong></span>: To stop mirroring, which keeps the current images available but stops new ones from being synced, select the CANCEL button.
					</li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Set robot permissions</strong></span>: Red Hat Quay robot accounts are named tokens that hold credentials for accessing external repositories. By assigning credentials to a robot, that robot can be used across multiple mirrored repositories that need to access the same external registry.
					</p><p class="simpara">
						You can assign an existing robot to a repository by going to Account Settings, then selecting the Robot Accounts icon in the left column. For the robot account, choose the link under the REPOSITORIES column. From the pop-up window, you can:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Check which repositories are assigned to that robot.
							</li><li class="listitem">
								Assign read, write or Admin privileges to that robot from the PERMISSION field shown in this figure: 
								<span class="inlinemediaobject"><img src="images/repo_mirror_robot_assign.png" alt="Assign a robot to mirrored repo"/></span>
							</li></ul></div></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Change robot credentials</strong></span>: Robots can hold credentials such as Kubernetes secrets, Docker login information, and Mesos bundles. To change robot credentials, select the Options gear on the robot’s account line on the Robot Accounts window and choose View Credentials. Add the appropriate credentials for the external repository the robot needs to access.
					</p><p class="simpara">
						<span class="inlinemediaobject"><img src="images/repo_mirror_robot_perm.png" alt="Assign permission to a robot"/></span>
					</p></li><li class="listitem">
						<span class="strong strong"><strong>Check and change general setting</strong></span>: Select the Settings button (gear icon) from the left column on the mirrored repository page. On the resulting page, you can change settings associated with the mirrored repository. In particular, you can change User and Robot Permissions, to specify exactly which users and robots can read from or write to the repo.
					</li></ul></div></section></section><section class="chapter" id="ldap-authentication-setup-for-quay-enterprise"><div class="titlepage"><div><div><h1 class="title">Chapter 10. LDAP Authentication Setup for Red Hat Quay</h1></div></div></div><p>
			The Lightweight Directory Access Protocol (LDAP) is an open, vendor-neutral, industry standard application protocol for accessing and maintaining distributed directory information services over an Internet Protocol (IP) network. Red Hat Quay supports using LDAP as an identity provider.
		</p><section class="section" id="setup-ldap-configuration"><div class="titlepage"><div><div><h2 class="title">10.1. Set Up LDAP Configuration</h2></div></div></div><p>
				In the config tool, locate the Authentication section and select “LDAP” from the drop-down menu. Update LDAP configuration fields as required.
			</p><p>
				<span class="inlinemediaobject"><img src="images/authentication-ldap.png" alt="Fill in LDAP information"/></span>
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Here is an example of the resulting entry in the <span class="emphasis"><em>config.yaml</em></span> file:
					</li></ul></div><pre class="literallayout">AUTHENTICATION_TYPE: LDAP</pre><section class="section" id="full_ldap_uri"><div class="titlepage"><div><div><h3 class="title">10.1.1. Full LDAP URI</h3></div></div></div><p>
					<span class="inlinemediaobject"><img src="images/authentication-ldap-uri.png" alt="LDAP server URI"/></span>
					<span class="inlinemediaobject"><img src="images/authentication-ldap-ssl.png" alt="LDAP server SSL"/></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The full LDAP URI, including the <span class="emphasis"><em>ldap://</em></span> or <span class="emphasis"><em>ldaps://</em></span> prefix.
						</li><li class="listitem">
							A URI beginning with <span class="emphasis"><em>ldaps://</em></span> will make use of the provided SSL certificate(s) for TLS setup.
						</li><li class="listitem">
							Here is an example of the resulting entry in the <span class="emphasis"><em>config.yaml</em></span> file:
						</li></ul></div><pre class="literallayout">LDAP_URI: ldaps://ldap.example.org</pre></section><section class="section" id="team_synchronization"><div class="titlepage"><div><div><h3 class="title">10.1.2. Team Synchronization</h3></div></div></div><p>
					<span class="inlinemediaobject"><img src="images/authentication-ldap-team-sync-1.png" alt="Team synchronization"/></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							If enabled, organization administrators who are also superusers can set teams to have their membership synchronized with a backing group in LDAP.
						</li></ul></div><p>
					<span class="inlinemediaobject"><img src="images/authentication-ldap-team-sync-2.png" alt="Team synchronization"/></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The resynchronization duration is the period at which a team must be re-synchronized. Must be expressed in a duration string form: 30m, 1h, 1d.
						</li><li class="listitem">
							Optionally allow non-superusers to enable and manage team syncing under organizations in which they are administrators.
						</li><li class="listitem">
							Here is an example of the resulting entries in the <span class="emphasis"><em>config.yaml</em></span> file:
						</li></ul></div><pre class="literallayout">FEATURE_TEAM_SYNCING: true
TEAM_RESYNC_STALE_TIME: 60m
FEATURE_NONSUPERUSER_TEAM_SYNCING_SETUP: true</pre></section><section class="section" id="base_and_relative_distinguished_names"><div class="titlepage"><div><div><h3 class="title">10.1.3. Base and Relative Distinguished Names</h3></div></div></div><p>
					<span class="inlinemediaobject"><img src="images/authentication-ldap-basedn.png" alt="Distinguished Names"/></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							A Distinguished Name path which forms the base path for looking up all LDAP records. Example: <span class="emphasis"><em>dc=my,dc=domain,dc=com</em></span>
						</li><li class="listitem">
							Optional list of Distinguished Name path(s) which form the secondary base path(s) for looking up all user LDAP records, relative to the Base DN defined above. These path(s) will be tried if the user is not found via the primary relative DN.
						</li><li class="listitem">
							User Relative DN is relative to BaseDN. Example: <span class="emphasis"><em>ou=NYC</em></span> not <span class="emphasis"><em>ou=NYC,dc=example,dc=org</em></span>
						</li><li class="listitem">
							Multiple “Secondary User Relative DNs” may be entered if there are multiple Organizational Units where User objects are located at. Simply type in the Organizational Units and click on Add button to add multiple RDNs. Example: <span class="emphasis"><em>ou=Users,ou=NYC and ou=Users,ou=SFO</em></span>
						</li><li class="listitem">
							The "User Relative DN" searches with subtree scope. For example, if your Organization has Organizational Units NYC and SFO under the Users OU (<span class="emphasis"><em>ou=SFO,ou=Users</em></span> and <span class="emphasis"><em>ou=NYC,ou=Users</em></span>), Red Hat Quay can authenticate users from both the <span class="emphasis"><em>NYC</em></span> and <span class="emphasis"><em>SFO</em></span> Organizational Units if the User Relative DN is set to Users (<span class="emphasis"><em>ou=Users</em></span>).
						</li><li class="listitem">
							Here is an example of the resulting entries in the <span class="emphasis"><em>config.yaml</em></span> file:
						</li></ul></div><pre class="literallayout">LDAP_BASE_DN:
- dc=example
- dc=com
LDAP_USER_RDN:
- ou=users
LDAP_SECONDARY_USER_RDNS:
- ou=bots
- ou=external</pre></section><section class="section" id="additional_user_filters"><div class="titlepage"><div><div><h3 class="title">10.1.4. Additional User Filters</h3></div></div></div><p>
					<span class="inlinemediaobject"><img src="images/authentication-ldap-user-filter.png" alt="User filters"/></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							If specified, the additional filter used for all user lookup queries. Note that all Distinguished Names used in the filter must be <span class="strong strong"><strong>full</strong></span> paths; the Base DN is not added automatically here. <span class="strong strong"><strong>Must</strong></span> be wrapped in parens. Example: (&amp;(someFirstField=someValue)(someOtherField=someOtherValue))
						</li><li class="listitem">
							Here is an example of the resulting entry in the <span class="emphasis"><em>config.yaml</em></span> file:
						</li></ul></div><pre class="literallayout">LDAP_USER_FILTER: (memberof=cn=developers,ou=groups,dc=example,dc=com)</pre></section><section class="section" id="administrator_dn"><div class="titlepage"><div><div><h3 class="title">10.1.5. Administrator DN</h3></div></div></div><p>
					<span class="inlinemediaobject"><img src="images/authentication-ldap-admin-dn.png" alt="Administrator DN"/></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The Distinguished Name and password for the administrator account. This account must be able to login and view the records for all user accounts. Example: uid=admin,ou=employees,dc=my,dc=domain,dc=com
						</li><li class="listitem">
							The password will be stored in <span class="strong strong"><strong>plaintext</strong></span> inside the config.yaml, so setting up a dedicated account or using a password hash is highly recommended.
						</li><li class="listitem">
							Here is an example of the resulting entries in the <span class="emphasis"><em>config.yaml</em></span> file:
						</li></ul></div><pre class="literallayout">LDAP_ADMIN_DN: cn=admin,dc=example,dc=com
LDAP_ADMIN_PASSWD: changeme</pre></section><section class="section" id="uid_and_mail_attributes"><div class="titlepage"><div><div><h3 class="title">10.1.6. UID and Mail attributes</h3></div></div></div><p>
					<span class="inlinemediaobject"><img src="images/authentication-ldap-uid-mail.png" alt="UID and Mail"/></span>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The UID attribute is the name of the property field in LDAP user record to use as the <span class="strong strong"><strong>username</strong></span>. Typically "uid".
						</li><li class="listitem">
							The Mail attribute is the name of the property field in LDAP user record that stores user e-mail address(es). Typically "mail".
						</li><li class="listitem">
							Either of these may be used during login.
						</li><li class="listitem">
							The logged in username must exist in User Relative DN.
						</li><li class="listitem">
							<span class="emphasis"><em>sAMAccountName</em></span> is the UID attribute for against Microsoft Active Directory setups.
						</li><li class="listitem">
							Here is an example of the resulting entries in the <span class="emphasis"><em>config.yaml</em></span> file:
						</li></ul></div><pre class="literallayout">LDAP_UID_ATTR: uid
LDAP_EMAIL_ATTR: mail</pre></section><section class="section" id="validation"><div class="titlepage"><div><div><h3 class="title">10.1.7. Validation</h3></div></div></div><p>
					Once the configuration is completed, click on “Save Configuration Changes” button to validate the configuration.
				</p><p>
					<span class="inlinemediaobject"><img src="images/authentication-ldap-success.png" alt="Fill in LDAP information"/></span>
				</p><p>
					All validation must succeed before proceeding, or additional configuration may be performed by selecting the "Continue Editing" button.
				</p></section></section><section class="section" id="common-issues"><div class="titlepage"><div><div><h2 class="title">10.2. Common Issues</h2></div></div></div><p>
				<span class="strong strong"><strong><span class="emphasis"><em>Invalid credentials</em></span></strong></span>
			</p><p>
				Administrator DN or Administrator DN Password values are incorrect
			</p><p>
				<span class="strong strong"><strong><span class="emphasis"><em>Verification of superuser %USERNAME% failed: Username not found The user either does not exist in the remote authentication system OR LDAP auth is misconfigured.</em></span></strong></span>
			</p><p>
				Red Hat Quay can connect to the LDAP server via Username/Password specified in the Administrator DN fields however cannot find the current logged in user with the UID Attribute or Mail Attribute fields in the User Relative DN Path. Either current logged in user does not exist in User Relative DN Path, or Administrator DN user do not have rights to search/read this LDAP path.
			</p></section><section class="section" id="configure-ldap-superuser"><div class="titlepage"><div><div><h2 class="title">10.3. Configure an LDAP user as superuser</h2></div></div></div><p>
				Once LDAP is configured, you can log in to your Red Hat Quay instance with a valid LDAP username and password. You are prompted to confirm your Red Hat Quay username as shown in the following figure:
			</p><p>
				<span class="inlinemediaobject"><img src="images/confirm-ldap-username.png" alt="Confirm LDAP username for Red Hat Quay"/></span>
			</p><p>
				To attach superuser privilege to an LDAP user, modify the <span class="emphasis"><em>config.yaml</em></span> file with the username. For example:
			</p><pre class="literallayout">SUPER_USERS:
- testadmin</pre><p>
				Restart the Red Hat Quay container with the updated config.yaml file. The next time you log in, the user will have superuser privileges.
			</p></section></section><section class="chapter" id="prometheus-metrics-under-quay-enterprise"><div class="titlepage"><div><div><h1 class="title">Chapter 11. Prometheus and Grafana metrics under Red Hat Quay</h1></div></div></div><p>
			Red Hat Quay exports a <a class="link" href="https://prometheus.io/">Prometheus</a>- and Grafana-compatible endpoint on each instance to allow for easy monitoring and alerting.
		</p><section class="section" id="exposing-the-prometheus-endpoint"><div class="titlepage"><div><div><h2 class="title">11.1. Exposing the Prometheus endpoint</h2></div></div></div><p>
				The Prometheus- and Grafana-compatible endpoint on the Red Hat Quay instance can be found at port <code class="literal">9092</code>. See <a class="link" href="https://access.redhat.com/solutions/3750281">Monitoring Quay with Prometheus and Grafana</a> for details on configuring Prometheus and Grafana to monitor Quay repository counts.
			</p><section class="section" id="setting-up-prometheus-to-consume-metrics"><div class="titlepage"><div><div><h3 class="title">11.1.1. Setting up Prometheus to consume metrics</h3></div></div></div><p>
					Prometheus needs a way to access all Red Hat Quay instances running in a cluster. In the typical setup, this is done by listing all the Red Hat Quay instances in a single named DNS entry, which is then given to Prometheus.
				</p></section><section class="section" id="dns-configuration-under-kubernetes"><div class="titlepage"><div><div><h3 class="title">11.1.2. DNS configuration under Kubernetes</h3></div></div></div><p>
					A simple <a class="link" href="http://kubernetes.io/docs/user-guide/services/">Kubernetes service</a> can be configured to provide the DNS entry for Prometheus. Details on running Prometheus under Kubernetes can be found at <a class="link" href="https://coreos.com/blog/prometheus-and-kubernetes-up-and-running.html">Prometheus and Kubernetes</a> and <a class="link" href="https://coreos.com/blog/monitoring-kubernetes-with-prometheus.html">Monitoring Kubernetes with Prometheus</a>.
				</p></section><section class="section" id="dns-configuration-for-a-manual-cluster"><div class="titlepage"><div><div><h3 class="title">11.1.3. DNS configuration for a manual cluster</h3></div></div></div><p>
					<a class="link" href="https://github.com/skynetservices/skydns">SkyDNS</a> is a simple solution for managing this DNS record when not using Kubernetes. SkyDNS can run on an <a class="link" href="https://github.com/coreos/etcd">etcd</a> cluster. Entries for each Red Hat Quay instance in the cluster can be added and removed in the etcd store. SkyDNS will regularly read them from there and update the list of Quay instances in the DNS record accordingly.
				</p></section></section></section><section class="chapter" id="georeplication-of-storage-in-quay"><div class="titlepage"><div><div><h1 class="title">Chapter 12. Georeplication of storage in Red Hat Quay</h1></div></div></div><p>
			Georeplication allows for a single globally-distributed Red Hat Quay to serve container images from localized storage.
		</p><p>
			When georeplication is configured, container image pushes will be written to the preferred storage engine for that Red Hat Quay instance. After the initial push, image data will be replicated in the background to other storage engines. The list of replication locations is configurable. An image pull will always use the closest available storage engine, to maximize pull performance.
		</p><section class="section" id="prerequisites"><div class="titlepage"><div><div><h2 class="title">12.1. Prerequisites</h2></div></div></div><p>
				Georeplication requires that there be a high availability storage engine (S3, GCS, RADOS, Swift) in each geographic region. Further, each region must be able to access <span class="strong strong"><strong>every</strong></span> storage engine due to replication requirements.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Local disk storage is not compatible with georeplication at this time.
				</p></div></div></section><section class="section" id="visit-the-management-panel_manage_quay"><div class="titlepage"><div><div><h2 class="title">12.2. Visit the Config Tool</h2></div></div></div><p>
				Open the Red Hat Quay Config Tool to configure storage for georeplication.
			</p></section><section class="section" id="enable-storage-replication"><div class="titlepage"><div><div><h2 class="title">12.3. Enable storage replication</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Scroll down to the section entitled <code class="literal">Registry Storage</code>.
					</li><li class="listitem">
						Click <code class="literal">Enable Storage Replication</code>.
					</li><li class="listitem">
						Add each of the storage engines to which data will be replicated. All storage engines to be used must be listed.
					</li><li class="listitem">
						If complete replication of all images to all storage engines is required, under each storage engine configuration click <code class="literal">Replicate to storage engine by default</code>. This will ensure that all images are replicated to that storage engine. To instead enable per-namespace replication, please contact support.
					</li><li class="listitem">
						When you are done, click <code class="literal">Save Configuration Changes</code>. Configuration changes will take effect the next time Red Hat Quay restarts.
					</li><li class="listitem"><p class="simpara">
						After adding storage and enabling “Replicate to storage engine by default” for Georeplications, you need to sync existing image data across all storage. To do this, you need to <code class="literal">oc exec</code> (or docker/kubectl exec) into the container and run:
					</p><pre class="screen"># scl enable python27 bash
# python -m util.backfillreplication</pre><p class="simpara">
						This is a one time operation to sync content after adding new storage.
					</p></li></ol></div></section><section class="section" id="run-quay-with-storage-preferences"><div class="titlepage"><div><div><h2 class="title">12.4. Run Red Hat Quay with storage preferences</h2></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Copy the config.yaml to all machines running Red Hat Quay
					</li><li class="listitem"><p class="simpara">
						For each machine in each region, add a <code class="literal">QUAY_DISTRIBUTED_STORAGE_PREFERENCE</code> environment variable with the preferred storage engine for the region in which the machine is running.
					</p><p class="simpara">
						For example, for a machine running in Europe with the config directory on the host available from /mnt/quay/config:
					</p><pre class="programlisting language-yaml"># sudo podman login quay.io
Username: yourquayuser
Password: *****
# sudo podman run -d -p 443:8443 -p 8080:8080 -v /mnt/quay/config:/conf/stack:Z \
    -e QUAY_DISTRIBUTED_STORAGE_PREFERENCE=europestorage \
    registry.redhat.io/quay/quay-rhel8:v3.5.1</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The value of the environment variable specified must match the name of a Location ID as defined in the config panel.
						</p></div></div></li><li class="listitem">
						Restart all Red Hat Quay containers
					</li></ol></div></section></section><section class="chapter" id="quay-troubleshooting-guides"><div class="titlepage"><div><div><h1 class="title">Chapter 13. Red Hat Quay Troubleshooting</h1></div></div></div><p>
			Common failure modes and best practices for recovery.
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/429.html">I’m receiving HTTP Status Code 429</a>
				</li><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/auth-failure.html">I’m authorized but I’m still getting 403s</a>
				</li><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/base-pull-issue.html">Base image pull in Dockerfile fails with 403</a>
				</li><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/cannot-add-trigger.html">Cannot add a build trigger</a>
				</li><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/cannot-load-build-logs.html">Build logs are not loading</a>
				</li><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/cannot-locate-dockerfile.html">I’m receiving "Cannot locate specified Dockerfile"</a> * <a class="link" href="http://docs.quay.io/issues/could-not-reach-any-registry-endpoint.html">Could not reach any registry endpoint</a>
				</li><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/ecs-auth-failure.html">Cannot access private repositories using EC2 Container Service</a>
				</li><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/iotimeout.html">Docker is returning an i/o timeout</a>
				</li><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/odd-login-failure.html">Docker login is failing with an odd error</a>
				</li><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/odd-pull-failure.html">Pulls are failing with an odd error</a>
				</li><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/push-timestamp-wrong.html">I just pushed but the timestamp is wrong</a>
				</li><li class="listitem">
					<a class="link" href="http://docs.quay.io/issues/quay-mesos.html">Pulling Private Quay.io images with Marathon/Mesos fails</a>
				</li></ul></div></section><section class="chapter" id="quay-schema"><div class="titlepage"><div><div><h1 class="title">Chapter 14. Schema for Red Hat Quay configuration</h1></div></div></div><p>
			Most Red Hat Quay configuration information is stored in the <code class="literal">config.yaml</code> file that is created using the browser-based config tool when Red Hat Quay is first deployed. This chapter describes the schema of those settings that are available to use in the`config.yaml` file.
		</p><p>
			The following fields required (all other are optional):
		</p><pre class="screen">AUTHENTICATION_TYPE
BUILDLOGS_REDIS
DATABASE_SECRET_KEY
DB_URI
DEFAULT_TAG_EXPIRATION
DISTRIBUTED_STORAGE_CONFIG
DISTRIBUTED_STORAGE_PREFERENCE
PREFERRED_URL_SCHEME
SECRET_KEY
SERVER_HOSTNAME
TAG_EXPIRATION_OPTIONS
USER_EVENTS_REDIS</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>ACTION_LOG_ARCHIVE_LOCATION</strong></span> [string]: If action log archiving is enabled, the storage engine in which to place the archived data.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">s3_us_east</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>ACTION_LOG_ARCHIVE_PATH</strong></span> [string]: If action log archiving is enabled, the path in storage in which to place the archived data.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">archives/actionlogs</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>ACTION_LOG_ROTATION_THRESHOLD</strong></span> [string]: If action log archiving is enabled, the time interval after which to rotate logs.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">30d</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>ALLOW_PULLS_WITHOUT_STRICT_LOGGING</strong></span> [boolean]: If true, pulls in which the pull audit log entry cannot be written will still succeed. Useful if the database can fallback into a read-only state and it is desired for pulls to continue during that time. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>APP_SPECIFIC_TOKEN_EXPIRATION</strong></span> [string, <code class="literal">null</code>]: The expiration for external app tokens. Defaults to None.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^[0-9]+(w|m|d|h|s)$</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>AUTHENTICATION_TYPE</strong></span> [string] required: The authentication engine to use for credential authentication.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>enum</strong></span>: Database, LDAP, JWT, Keystone, OIDC.
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">Database</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>AVATAR_KIND</strong></span> [string]: The types of avatars to display, either generated inline (local) or Gravatar (gravatar)
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>enum</strong></span>: local, gravatar
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>BITBUCKET_TRIGGER_CONFIG</strong></span> ['object', 'null']: Configuration for using BitBucket for build triggers.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>consumer_key</strong></span> [string] required: The registered consumer key(client ID) for this Red Hat Quay instance.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">0e8dbe15c4c7630b6780</code>
								</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>BLACKLISTED_EMAIL_DOMAINS</strong></span> [array]: The array of email-address domains that is used if FEATURE_BLACKLISTED_EMAILS is set to true.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">"example.com", "example.org"</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>BLACKLIST_V2_SPEC</strong></span> [string]: The Docker CLI versions to which Red Hat Quay will respond that V2 is <span class="strong strong"><strong>unsupported</strong></span>. Defaults to <code class="literal">&lt;1.6.0</code>.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="http://pythonhosted.org/semantic_version/reference.html#semantic_version.Spec">http://pythonhosted.org/semantic_version/reference.html#semantic_version.Spec</a>
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">&lt;1.8.0</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>BRANDING</strong></span> [object]: Custom branding for logos and URLs in the Red Hat Quay UI.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Required</strong></span>: logo
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>properties</strong></span>:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>logo</strong></span> [string]: Main logo image URL.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">/static/img/quay-horizontal-color.svg</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>footer_img</strong></span> [string]: Logo for UI footer.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">/static/img/RedHat.svg</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>footer_url</strong></span> [string]: Link for footer image.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="https://redhat.com">https://redhat.com</a></code>
										</li></ul></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>BROWSER_API_CALLS_XHR_ONLY</strong></span> [boolean]: If enabled, only API calls marked as being made by an XHR will be allowed from browsers. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: False
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>BUILDLOGS_REDIS</strong></span> [object] required: Connection information for Redis for build logs caching.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>HOST</strong></span> [string] required: The hostname at which Redis is accessible.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">my.redis.cluster</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>PASSWORD</strong></span> [string]: The password to connect to the Redis instance.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">mypassword</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>PORT</strong></span> [number]: The port at which Redis is accessible.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">1234</code>
								</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>CONTACT_INFO</strong></span> [array]: If specified, contact information to display on the contact page. If only a single piece of contact information is specified, the contact footer will link directly.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Min Items</strong></span>: 1
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Unique Items</strong></span>: True
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>array item 0</strong></span> [string]: Adds a link to send an e-mail
								</li><li class="listitem">
									<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^mailto:(.)+$</code>
								</li><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">mailto:support@quay.io</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>array item 1</strong></span> [string]: Adds a link to visit an IRC chat room
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^irc://(.)+$</code>
								</li><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="irc://chat.freenode.net:6665/quay">irc://chat.freenode.net:6665/quay</a></code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>array item 2</strong></span> [string]: Adds a link to call a phone number
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^tel:(.)+$</code>
								</li><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">tel:+1-888-930-3475</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>array item 3</strong></span> [string]: Adds a link to a defined URL
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^http(s)?://(.)+$</code>
								</li><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="https://twitter.com/quayio">https://twitter.com/quayio</a></code>
								</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>DB_CONNECTION_ARGS</strong></span> [object]: If specified, connection arguments for the database such as timeouts and SSL.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>threadlocals</strong></span> [boolean] required: Whether to use thread-local connections. Should <span class="strong strong"><strong>ALWAYS</strong></span> be <code class="literal">true</code>.
						</li><li class="listitem">
							<span class="strong strong"><strong>autorollback</strong></span> [boolean] required: Whether to use auto-rollback connections. Should <span class="strong strong"><strong>ALWAYS</strong></span> be <code class="literal">true</code>.
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>ssl</strong></span> [object]: SSL connection configuration
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>ca</strong></span> [string] required: Absolute container path to the CA certificate to use for SSL connections.
								</li><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">conf/stack/ssl-ca-cert.pem</code>
								</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>DATABASE_SECRET_KEY</strong></span> [string] required: Key used to encrypt sensitive fields within the database. It is imperative that once set, this value is never changed. The consequence of changing this is invalidating all reliant fields (repository mirror username and password configurations, for example).
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">40157269433064266822674401740626984898972632465622168464725100311621640999470</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>DB_URI</strong></span> [string] required: The URI at which to access the database, including any credentials.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="https://www.postgresql.org/docs/9.3/static/libpq-connect.html#AEN39495">https://www.postgresql.org/docs/9.3/static/libpq-connect.html#AEN39495</a>
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">mysql+pymysql://username:password@dns.of.database/quay</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>DEFAULT_NAMESPACE_MAXIMUM_BUILD_COUNT</strong></span> [number, <code class="literal">null</code>]: If not None, the default maximum number of builds that can be queued in a namespace.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">20</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>DEFAULT_TAG_EXPIRATION</strong></span> [string] required: The default, configurable tag expiration time for time machine. Defaults to <code class="literal">2w</code>.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^[0-9]+(w|m|d|h|s)$</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>DIRECT_OAUTH_CLIENTID_WHITELIST</strong></span> [array]: A list of client IDs of <span class="strong strong"><strong>Red Hat Quay-managed</strong></span> applications that are allowed to perform direct OAuth approval without user approval.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Min Items</strong></span>: None
						</li><li class="listitem">
							<span class="strong strong"><strong>Unique Items</strong></span>: True
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="https://coreos.com/quay-enterprise/docs/latest/direct-oauth.html">https://coreos.com/quay-enterprise/docs/latest/direct-oauth.html</a>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>array item</strong></span> [string]
								</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>DISTRIBUTED_STORAGE_CONFIG</strong></span> [object] required: Configuration for storage engine(s) to use in Red Hat Quay. Each key represents an unique identifier for a storage engine. The value consists of a tuple of (key, value) forming an object describing the storage engine parameters.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong> OCS / Noobaa</strong></span>:
						</p><pre class="screen">{"rhocsStorage": ["RHOCSStorage",
{"access_key":"access_key"},
{"secret_key":"secret_key"},
{"bucket_name":"quay-datastore-9b2108a3-29f5-43f2-a9d5-2872174f9a56"},
{"hostname":"s3.openshift-storage.svc.cluster.local"},
{"is_secure":"true"},
{"port":"443"},
{"storage_path":"/datastorage/registry"}
]}</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Ceph / RadosGW Storage / Hitachi HCP</strong></span>:
						</p><pre class="screen">{"radosGWStorage": ["RadosGWStorage",
{"access_key": "access_key"},
{"secret_key": "secret_key"},
{"bucket_name": "quay"},
{"hostname": "hostname"},
{"is_secure": "false"},
{"port": "443"},
{"storage_path": "/datastorage/registry"}
]}</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>AWS S3 Storage</strong></span>:
						</p><pre class="screen">{"s3Storage": ["S3Storage",
{"host": "s3.ap-southeast-2.amazonaws.com"},
{"s3_access_key": "/datastorage/registry"},
{"s3_bucket": "/datastorage/registry"},
{"s3_secret_key": "/datastorage/registry"},
{"storage_path": "/datastorage/registry"}
]}</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Azure Storage</strong></span>:
						</p><pre class="screen">{"azureStorage": ["AzureStorage",
{"azure_account_name": "azure_account_name"},
{"azure_account_key": "some/path/"},
{"azure_container": "azure_container"},
{"sas_token": "some/path/"},
{"storage_path": "/datastorage/registry"}
]}</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Google Cloud Storage</strong></span>:
						</p><pre class="screen">{"googleCloudStorage": ["GoogleCloudStorage",
{"access_key": "access_key"},
{"secret_key": "secret_key"},
{"bucket_name": "bucket_name"},
{"storage_path": "/datastorage/registry"}
]}</pre></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Swift Storage</strong></span>:
						</p><pre class="screen">{"swiftStorage": ["SwiftStorage",
{"swift_user":"user"},
{"swift_password":"password"},
{"swift_container":"quay"},
{"auth_url": "https://example.org/swift/v1/quay"},
{"auth_version": "1"},
{"ca_cert_path":"/conf/stack/swift.cert"},
{"storage_path":"/datastorage/registry"}
]}</pre></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>DISTRIBUTED_STORAGE_DEFAULT_LOCATIONS</strong></span> [array]: The list of storage engine(s) (by ID in DISTRIBUTED_STORAGE_CONFIG) whose images should be fully replicated, by default, to all other storage engines.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Min Items</strong></span>: None
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">s3_us_east, s3_us_west</code>
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>array item</strong></span> [string]
								</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>DISTRIBUTED_STORAGE_PREFERENCE</strong></span> [array] required: The preferred storage engine(s) (by ID in DISTRIBUTED_STORAGE_CONFIG) to use. A preferred engine means it is first checked for pulling and images are pushed to it.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Min Items</strong></span>: None
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">[u’s3_us_east', u’s3_us_west']</code>
								</li><li class="listitem">
									<span class="strong strong"><strong>array item</strong></span> [string]
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>preferred_url_scheme</strong></span> [string] required: The URL scheme to use when hitting Red Hat Quay. If Red Hat Quay is behind SSL <span class="strong strong"><strong>at all</strong></span>, this <span class="strong strong"><strong>must</strong></span> be <code class="literal">https</code>.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>enum</strong></span>: <code class="literal">http, https</code>
								</li><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">https</code>
								</li></ul></div></li></ul></div></li><li class="listitem">
					<span class="strong strong"><strong>DOCUMENTATION_ROOT</strong></span> [string]: Root URL for documentation links.
				</li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>ENABLE_HEALTH_DEBUG_SECRET</strong></span> [string, <code class="literal">null</code>]: If specified, a secret that can be given to health endpoints to see full debug info when not authenticated as a superuser.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">somesecrethere</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>EXPIRED_APP_SPECIFIC_TOKEN_GC</strong></span> [string, <code class="literal">null</code>]: Duration of time expired external app tokens will remain before being garbage collected. Defaults to 1d.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>pattern</strong></span>: <code class="literal">^[0-9]+(w|m|d|h|s)$</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>EXTERNAL_TLS_TERMINATION</strong></span> [boolean]: If TLS is supported, but terminated at a layer before Red Hat Quay, must be true.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_ACI_CONVERSION</strong></span> [boolean]: Whether to enable conversion to ACIs. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_ACTION_LOG_ROTATION</strong></span> [boolean]: Whether or not to rotate old action logs to storage. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_ADVERTISE_V2</strong></span> [boolean]: Whether the v2/ endpoint is visible. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_AGGREGATED_LOG_COUNT_RETRIEVAL</strong></span> [boolean]: Whether to allow retrieval of aggregated log counts. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_ANONYMOUS_ACCESS</strong></span> [boolean]: Whether to allow anonymous users to browse and pull public repositories. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_APP_REGISTRY</strong></span> [boolean]: Whether to enable support for App repositories. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_APP_SPECIFIC_TOKENS</strong></span> [boolean]: If enabled, users can create tokens for use by the Docker CLI. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: False
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_BITBUCKET_BUILD</strong></span> [boolean]: Whether to support Bitbucket build triggers. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem">
					<span class="strong strong"><strong>FEATURE_BLACKLISTED_EMAIL</strong></span>
				</li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_BUILD_SUPPORT</strong></span> [boolean]: Whether to support Dockerfile build. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_CHANGE_TAG_EXPIRARTION</strong></span> [boolean]: Whether users and organizations are allowed to change the tag expiration for tags in their namespace. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_DIRECT_LOGIN</strong></span> [boolean]: Whether users can directly login to the UI. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_GARBAGE_COLLECTION</strong></span> [boolean]: Whether garbage collection of repositories is enabled. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_GITHUB_BUILD</strong></span> [boolean]: Whether to support GitHub build triggers. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_GITHUB_LOGIN</strong></span> [boolean]: Whether GitHub login is supported. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_GITLAB_BUILD</strong></span>[boolean]: Whether to support GitLab build triggers. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_GOOGLE_LOGIN</strong></span> [boolean]: Whether Google login is supported. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_INVITE_ONLY_USER_CREATION</strong></span> [boolean]: Whether users being created must be invited by another user. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_LIBRARY_SUPPORT</strong></span> [boolean]: Whether to allow for "namespace-less" repositories when pulling and pushing from Docker. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_LOG_EXPORT</strong></span> [boolean]: Whether to allow exporting of action logs. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_MAILING</strong></span> [boolean]: Whether emails are enabled. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_NONSUPERUSER_TEAM_SYNCING_SETUP</strong></span> [boolean]: If enabled, non-superusers can setup syncing on teams to backing LDAP or Keystone. Defaults To False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_PARTIAL_USER_AUTOCOMPLETE</strong></span> [boolean]: If set to true, autocompletion will apply to partial usernames. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_PERMANENT_SESSIONS</strong></span> [boolean]: Whether sessions are permanent. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_PROXY_STORAGE</strong></span> [boolean]: Whether to proxy all direct download URLs in storage via the registry nginx. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_PUBLIC_CATALOG</strong></span> [boolean]: If set to true, the <code class="literal">_catalog</code> endpoint returns public repositories. Otherwise, only private repositories can be returned. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_RATE_LIMITS</strong></span> [boolean]: Whether to enable rate limits on API and registry endpoints. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_READER_BUILD_LOGS</strong></span> [boolean]: If set to true, build logs may be read by those with read access to the repo, rather than only write access or admin access. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: False
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_READONLY_APP_REGISTRY</strong></span> [boolean]: Whether to App repositories are read-only. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_RECAPTCHA</strong></span> [boolean]: Whether Recaptcha is necessary for user login and recovery. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="https://www.google.com/recaptcha/intro/">https://www.google.com/recaptcha/intro/</a>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_REPO_MIRROR</strong></span> [boolean]: Require HTTPS and verify certificates of Quay registry during mirror. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_REQUIRE_ENCRYPTED_BASIC_AUTH</strong></span> [boolean]: Whether non-encrypted passwords (as opposed to encrypted tokens) can be used for basic auth. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_REQUIRE_TEAM_INVITE</strong></span> [boolean]: Whether to require invitations when adding a user to a team. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_RESTRICTED_V1_PUSH</strong></span> [boolean]: If set to true, only namespaces listed in V1_PUSH_WHITELIST support V1 push. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_SECURITY_NOTIFICATIONS</strong></span> [boolean]: If the security scanner is enabled, whether to turn on/off security notifications. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_SECURITY_SCANNER</strong></span> [boolean]: Whether to turn on/off the security scanner. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="https://access.redhat.com/documentation/en-us/red_hat_quay/3.5/html-single/manage_red_hat_quay/#clair-initial-setup">https://access.redhat.com/documentation/en-us/red_hat_quay/3.5/html-single/manage_red_hat_quay/#clair-initial-setup</a>
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_STORAGE_REPLICATION</strong></span> [boolean]: Whether to automatically replicate between storage engines. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_SUPER_USERS</strong></span> [boolean]: Whether superusers are supported. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_TEAM_SYNCING</strong></span> [boolean]: Whether to allow for team membership to be synced from a backing group in the authentication engine (LDAP or Keystone).
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_USER_CREATION</strong></span> [boolean]: Whether users can be created (by non-superusers). Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_USER_LAST_ACCESSED</strong></span> [boolean]: Whether to record the last time a user was accessed. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_USER_LOG_ACCESS</strong></span> [boolean]: If set to true, users will have access to audit logs for their namespace. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_USER_METADATA</strong></span> [boolean]: Whether to collect and support user metadata. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_USERNAME_CONFIRMATION</strong></span> [boolean]: If set to true, users can confirm their generated usernames. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">False</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FEATURE_USER_RENAME</strong></span> [boolean]: If set to true, users can rename their own namespace. Defaults to False.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>FRESH_LOGIN_TIMEOUT</strong></span> [string]: The time after which a fresh login requires users to reenter their password
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">5m</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>GITHUB_LOGIN_CONFIG</strong></span> [object, 'null']: Configuration for using GitHub (Enterprise) as an external login provider.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="https://coreos.com/quay-enterprise/docs/latest/github-auth.html">https://coreos.com/quay-enterprise/docs/latest/github-auth.html</a>
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>allowed_organizations</strong></span> [array]: The names of the GitHub (Enterprise) organizations whitelisted to work with the ORG_RESTRICT option.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Min Items</strong></span>: None
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>Unique Items</strong></span>: True
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>array item</strong></span> [string]
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>API_ENDPOINT</strong></span> [string]: The endpoint of the GitHub (Enterprise) API to use. Must be overridden for github.com.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="https://api.github.com/">https://api.github.com/</a></code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>CLIENT_ID</strong></span> [string] required: The registered client ID for this Red Hat Quay instance; cannot be shared with GITHUB_TRIGGER_CONFIG.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="https://coreos.com/quay-enterprise/docs/latest/github-app.html">https://coreos.com/quay-enterprise/docs/latest/github-app.html</a>
								</li><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">0e8dbe15c4c7630b6780</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>CLIENT_SECRET</strong></span> [string] required: The registered client secret for this Red Hat Quay instance.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="https://coreos.com/quay-enterprise/docs/latest/github-app.html">https://coreos.com/quay-enterprise/docs/latest/github-app.html</a>
								</li><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">e4a58ddd3d7408b7aec109e85564a0d153d3e846</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>GITHUB_ENDPOINT</strong></span> [string] required: The endpoint of the GitHub (Enterprise) being hit.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="https://github.com/">https://github.com/</a></code>
								</li></ul></div></li><li class="listitem">
							<span class="strong strong"><strong>ORG_RESTRICT</strong></span> [boolean]: If true, only users within the organization whitelist can login using this provider.
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>GITHUB_TRIGGER_CONFIG</strong></span> [object, <code class="literal">null</code>]: Configuration for using GitHub (Enterprise) for build triggers.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="https://coreos.com/quay-enterprise/docs/latest/github-build.html">https://coreos.com/quay-enterprise/docs/latest/github-build.html</a>
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>API_ENDPOINT</strong></span> [string]: The endpoint of the GitHub (Enterprise) API to use. Must be overridden for github.com.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="https://api.github.com/">https://api.github.com/</a></code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>CLIENT_ID</strong></span> [string] required: The registered client ID for this Red Hat Quay instance; cannot be shared with GITHUB_LOGIN_CONFIG.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="https://coreos.com/quay-enterprise/docs/latest/github-app.html">https://coreos.com/quay-enterprise/docs/latest/github-app.html</a>
								</li><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">0e8dbe15c4c7630b6780</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>CLIENT_SECRET</strong></span> [string] required: The registered client secret for this Red Hat Quay instance.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="https://coreos.com/quay-enterprise/docs/latest/github-app.html">https://coreos.com/quay-enterprise/docs/latest/github-app.html</a>
								</li><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">e4a58ddd3d7408b7aec109e85564a0d153d3e846</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>GITHUB_ENDPOINT</strong></span> [string] required: The endpoint of the GitHub (Enterprise) being hit.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="https://github.com/">https://github.com/</a></code>
								</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>GITLAB_TRIGGER_CONFIG</strong></span> [object]: Configuration for using Gitlab (Enterprise) for external authentication.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>CLIENT_ID</strong></span> [string] required: The registered client ID for this Red Hat Quay instance.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">0e8dbe15c4c7630b6780</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>CLIENT_SECRET</strong></span> [string] required: The registered client secret for this Red Hat Quay instance.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">e4a58ddd3d7408b7aec109e85564a0d153d3e846</code>
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>gitlab_endpoint</strong></span> [string] required: The endpoint at which Gitlab(Enterprise) is running.
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="https://gitlab.com">https://gitlab.com</a></code>
										</li></ul></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>GOOGLE_LOGIN_CONFIG</strong></span> [object, <code class="literal">null</code>]: Configuration for using Google for external authentication
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>CLIENT_ID</strong></span> [string] required: The registered client ID for this Red Hat Quay instance.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">0e8dbe15c4c7630b6780</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>CLIENT_SECRET</strong></span> [string] required: The registered client secret for this Red Hat Quay instance.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: e4a58ddd3d7408b7aec109e85564a0d153d3e846
								</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>GPG2_PRIVATE_KEY_FILENAME</strong></span> [string]: The filename of the private key used to decrypte ACIs.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">/path/to/file</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>GPG2_PRIVATE_KEY_NAME</strong></span> [string]: The name of the private key used to sign ACIs.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">gpg2key</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>GPG2_PUBLIC_KEY_FILENAME</strong></span> [string]: The filename of the public key used to encrypt ACIs.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">/path/to/file</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>HEALTH_CHECKER</strong></span> [string]: The configured health check.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">('RDSAwareHealthCheck', {'access_key': 'foo', 'secret_key': 'bar'})</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>JWT_AUTH_ISSUER</strong></span> [string]: The endpoint for JWT users.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="http://192.168.99.101:6060">http://192.168.99.101:6060</a></code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^http(s)?://(.)+$</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>JWT_GETUSER_ENDPOINT</strong></span> [string]: The endpoint for JWT users.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="http://192.168.99.101:6060">http://192.168.99.101:6060</a></code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^http(s)?://(.)+$</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>JWT_QUERY_ENDPOINT</strong></span> [string]: The endpoint for JWT queries.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="http://192.168.99.101:6060">http://192.168.99.101:6060</a></code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^http(s)?://(.)+$</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>JWT_VERIFY_ENDPOINT</strong></span> [string]: The endpoint for JWT verification.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="http://192.168.99.101:6060">http://192.168.99.101:6060</a></code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^http(s)?://(.)+$</code>
						</li></ul></div></li><li class="listitem">
					<span class="strong strong"><strong>LDAP_ADMIN_DN</strong></span> [string]: The admin DN for LDAP authentication.
				</li><li class="listitem">
					<span class="strong strong"><strong>LDAP_ADMIN_PASSWD</strong></span> [string]: The admin password for LDAP authentication.
				</li><li class="listitem">
					<span class="strong strong"><strong>LDAP_ALLOW_INSECURE_FALLBACK</strong></span> [boolean]: Whether or not to allow SSL insecure fallback for LDAP authentication.
				</li><li class="listitem">
					<span class="strong strong"><strong>LDAP_BASE_DN</strong></span> [string]: The base DN for LDAP authentication.
				</li><li class="listitem">
					<span class="strong strong"><strong>LDAP_EMAIL_ATTR</strong></span> [string]: The email attribute for LDAP authentication.
				</li><li class="listitem">
					<span class="strong strong"><strong>LDAP_UID_ATTR</strong></span> [string]: The uid attribute for LDAP authentication.
				</li><li class="listitem">
					<span class="strong strong"><strong>LDAP_URI</strong></span> [string]: The LDAP URI.
				</li><li class="listitem">
					<span class="strong strong"><strong>LDAP_USER_FILTER</strong></span> [string]: The user filter for LDAP authentication.
				</li><li class="listitem">
					<span class="strong strong"><strong>LDAP_USER_RDN</strong></span> [array]: The user RDN for LDAP authentication.
				</li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>LOGS_MODEL</strong></span> [string]: Logs model for action logs.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>enum</strong></span>: database, transition_reads_both_writes_es, elasticsearch
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">database</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>LOGS_MODEL_CONFIG</strong></span> [object]: Logs model config for action logs
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>elasticsearch_config</strong></span> [object]: Elasticsearch cluster configuration
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>access_key</strong></span> [string]: Elasticsearch user (or IAM key for AWS ES)
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">some_string</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>host</strong></span> [string]: Elasticsearch cluster endpoint
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">host.elasticsearch.example</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>index_prefix</strong></span> [string]: Elasticsearch’s index prefix
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">logentry_</code>
										</li></ul></div></li><li class="listitem">
									<span class="strong strong"><strong>index_settings</strong></span> [object]: Elasticsearch’s index settings
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>use_ssl</strong></span> [boolean]: Use ssl for Elasticsearch. Defaults to True
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>secret_key</strong></span> [string]: Elasticsearch password (or IAM secret for AWS ES)
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">some_secret_string</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>aws_region</strong></span> [string]: Amazon web service region
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">us-east-1</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>port</strong></span> [number]: Elasticsearch cluster endpoint port
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">1234</code>
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>kinesis_stream_config</strong></span> [object]: AWS Kinesis Stream configuration
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>aws_secret_key</strong></span> [string]: AWS secret key
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">some_secret_key</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>stream_name</strong></span> [string]: Kinesis stream to send action logs to
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">logentry-kinesis-stream</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>aws_access_key</strong></span> [string]: AWS access key
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">some_access_key</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>retries</strong></span> [number]: Max number of attempts made on a single request
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">5</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>read_timeout</strong></span> [number]: Number of seconds before timeout when reading from a connection
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">5</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>max_pool_connections</strong></span> [number]: The maximum number of connections to keep in a connection pool
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">10</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>aws_region</strong></span> [string]: AWS region
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">us-east-1</code>
										</li></ul></div></li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>connect_timeout</strong></span> [number]: Number of seconds before timeout when attempting to make a connection
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">5</code>
										</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>producer</strong></span> [string]: Logs producer if logging to Elasticsearch
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>enum</strong></span>: kafka, elasticsearch, kinesis_stream
								</li><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">kafka</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>kafka_config</strong></span> [object]: Kafka cluster configuration
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>topic</strong></span> [string]: Kafka topic to publish log entries to
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">logentry</code>
										</li></ul></div></li><li class="listitem">
									<span class="strong strong"><strong>bootstrap_servers</strong></span> [array]: List of Kafka brokers to bootstrap the client from
								</li><li class="listitem"><p class="simpara">
									<span class="strong strong"><strong>max_block_seconds</strong></span> [number]: Max number of seconds to block during a <code class="literal">send()</code>, either because the buffer is full or metadata unavailable
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											<span class="strong strong"><strong>Example</strong></span>: <code class="literal">10</code>
										</li></ul></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>LOG_ARCHIVE_LOCATION</strong></span> [string]: If builds are enabled, the storage engine in which to place the archived build logs.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">s3_us_east</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>LOG_ARCHIVE_PATH</strong></span> [string]: If builds are enabled, the path in storage in which to place the archived build logs.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">archives/buildlogs</code>
						</li></ul></div></li><li class="listitem">
					<span class="strong strong"><strong>LOGS_MODEL</strong></span> [string]: Logs model for action logs.
				</li><li class="listitem">
					<span class="strong strong"><strong>enum</strong></span>: <code class="literal">database</code>, <code class="literal">transition_reads_both_writes_es</code>, <code class="literal">elasticsearch</code>
				</li><li class="listitem">
					<span class="strong strong"><strong>Example</strong></span>: <code class="literal">database</code>
				</li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>MAIL_DEFAULT_SENDER</strong></span> [string, <code class="literal">null</code>]: If specified, the e-mail address used as the <code class="literal">from</code> when Red Hat Quay sends e-mails. If none, defaults to <code class="literal">support@quay.io</code>.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">support@myco.com</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>MAIL_PASSWORD</strong></span> [string, <code class="literal">null</code>]: The SMTP password to use when sending e-mails.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">mypassword</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>MAIL_PORT</strong></span> [number]: The SMTP port to use. If not specified, defaults to 587.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">588</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>MAIL_SERVER</strong></span> [string]: The SMTP server to use for sending e-mails. Only required if FEATURE_MAILING is set to true.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">smtp.somedomain.com</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>MAIL_USERNAME</strong></span> [string, 'null']: The SMTP username to use when sending e-mails.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">myuser</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>MAIL_USE_TLS</strong></span> [boolean]: If specified, whether to use TLS for sending e-mails.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>MAXIMUM_LAYER_SIZE</strong></span> [string]: Maximum allowed size of an image layer. Defaults to 20G.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^[0-9]+(G|M)$</code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">100G</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>PREFERRED_URL_SCHEME</strong></span> [string]: The URL scheme to use when hitting Red Hat Quay. If Red Hat Quay is behind SSL <span class="strong strong"><strong>at all</strong></span>, this <span class="strong strong"><strong>must</strong></span> be <code class="literal">https</code>
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>enum</strong></span>: <code class="literal">http</code> or <code class="literal">https</code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">https</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>PROMETHEUS_NAMESPACE</strong></span> [string]: The prefix applied to all exposed Prometheus metrics. Defaults to <code class="literal">quay</code>.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">myregistry</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>PUBLIC_NAMESPACES</strong></span> [array]: If a namespace is defined in the public namespace list, then it will appear on <span class="strong strong"><strong>all</strong></span> user’s repository list pages, regardless of whether that user is a member of the namespace. Typically, this is used by an enterprise customer in configuring a set of "well-known" namespaces.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Min Items</strong></span>: None
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Unique Items</strong></span>: True
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>array item</strong></span> [string]
								</li></ul></div></li></ul></div></li><li class="listitem">
					<span class="strong strong"><strong>RECAPTCHA_SECRET_KEY</strong></span> [string]: If recaptcha is enabled, the secret key for the Recaptcha service.
				</li><li class="listitem">
					<span class="strong strong"><strong>RECAPTCHA_SITE_KEY</strong></span> [string]: If recaptcha is enabled, the site key for the Recaptcha service.
				</li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>REGISTRY_STATE</strong></span> [string]: The state of the registry.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>enum</strong></span>: <code class="literal">normal</code> or <code class="literal">read-only</code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">read-only</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>REGISTRY_TITLE</strong></span> [string]: If specified, the long-form title for the registry. Defaults to <code class="literal">Quay Enterprise</code>.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">Corp Container Service</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>REGISTRY_TITLE_SHORT</strong></span> [string]: If specified, the short-form title for the registry. Defaults to <code class="literal">Quay Enterprise</code>.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">CCS</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>REPO_MIRROR_INTERVAL</strong></span> [number]: The number of seconds between checking for repository mirror candidates. Defaults to 30.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">30</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>REPO_MIRROR_SERVER_HOSTNAME</strong></span> [string]: Replaces the SERVER_HOSTNAME as the destination for mirroring. Defaults to unset.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">openshift-quay-service</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>REPO_MIRROR_TLS_VERIFY</strong></span> [boolean]: Require HTTPS and verify certificates of Quay registry during mirror. Defaults to True.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">True</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SEARCH_MAX_RESULT_PAGE_COUNT</strong></span> [number]: Maximum number of pages the user can paginate in search before they are limited. Defaults to 10.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">10</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SEARCH_RESULTS_PER_PAGE</strong></span> [number]: Number of results returned per page by search page. Defaults to 10.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">10</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SECRET_KEY</strong></span> [string] required: Key used to encrypt sensitive fields within the database and a run time. It is imperative that once set, this value is never changed. The consequence of changing this is invalidating all reliant fields (encrypted password credentials, for example).
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">40157269433064266822674401740626984898972632465622168464725100311621640999470</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SECURITY_SCANNER_ENDPOINT</strong></span> [string]: The endpoint for the security scanner.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^http(s)?://(.)+$</code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="http://192.168.99.101:6060">http://192.168.99.101:6060</a></code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SECURITY_SCANNER_INDEXING_INTERVAL</strong></span> [number]: The number of seconds between indexing intervals in the security scanner. Defaults to 30.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">30</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SECURITY_SCANNER_NOTIFICATIONS</strong></span> [boolean]: Whether or not to the security scanner notification feature
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">false</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SECURITY_SCANNER_V4_ENDPOINT</strong></span> [string]: The endpoint for the V4 security scanner.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^http(s)?://(.)+$</code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal"><a class="link" href="http://192.168.99.101:6060">http://192.168.99.101:6060</a></code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SERVER_HOSTNAME</strong></span> [string] required: The URL at which Red Hat Quay is accessible, without the scheme.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">quay.io</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SESSION_COOKIE_SECURE</strong></span> [boolean]: Whether the <code class="literal">secure</code> property should be set on session cookies. Defaults to False. Recommended to be True for all installations using SSL.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: True
						</li><li class="listitem">
							<span class="strong strong"><strong>Reference</strong></span>: <a class="link" href="https://en.wikipedia.org/wiki/Secure_cookies">https://en.wikipedia.org/wiki/Secure_cookies</a>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SSL_CIPHERS</strong></span> [array]: If specified, the nginx-defined list of SSL ciphers to enabled and disabled.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">CAMELLIA</code>, <code class="literal">!3DES</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SSL_PROTOCOLS</strong></span> [array]: If specified, nginx is configured to enabled a list of SSL protocols defined in the list. Removing an SSL protocol from the list disables the protocol during Red Hat Quay startup.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>SSL_PROTOCOLS</strong></span>: ['TLSv1','TLSv1.1','TLSv1.2']
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SUCCESSIVE_TRIGGER_FAILURE_DISABLE_THRESHOLD</strong></span> [number]: If not None, the number of successive failures that can occur before a build trigger is automatically disabled. Defaults to 100.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">50</code>
						</li></ul></div></li><li class="listitem">
					<span class="strong strong"><strong>SUCCESSIVE_TRIGGER_INTERNAL_ERROR_DISABLE_THRESHOLD</strong></span> [number]: If not None, the number of successive internal errors that can occur before a build trigger is automatically disabled. Defaults to 5.
				</li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>SUPER_USERS</strong></span> [array]: Red Hat Quay usernames of those users to be granted superuser privileges.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Min Items</strong></span>: None
						</li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>Unique Items</strong></span>: True
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>array item</strong></span> [string]
								</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>TAG_EXPIRATION_OPTIONS</strong></span> [array] required: The options that users can select for expiration of tags in their namespace (if enabled).
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Min Items</strong></span>: None
						</li><li class="listitem">
							<span class="strong strong"><strong>array item</strong></span> [string]
						</li><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^[0-9]+(w|m|d|h|s)$</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>TEAM_RESYNC_STALE_TIME</strong></span> [string]: If team syncing is enabled for a team, how often to check its membership and resync if necessary (Default: 30m).
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^[0-9]+(w|m|d|h|s)$</code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">2h</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>USERFILES_LOCATION</strong></span> [string]: ID of the storage engine in which to place user-uploaded files
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">s3_us_east</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>USERFILES_PATH</strong></span> [string]: Path under storage in which to place user-uploaded files
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">userfiles</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>USER_EVENTS_REDIS</strong></span> [object] required: Connection information for Redis for user event handling.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>HOST</strong></span> [string] required: The hostname at which Redis is accessible.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">my.redis.cluster</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>PASSWORD</strong></span> [string]: The password to connect to the Redis instance.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">mypassword</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>PORT</strong></span> [number]: The port at which Redis is accessible.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: <code class="literal">1234</code>
								</li></ul></div></li><li class="listitem"><p class="simpara">
							<span class="strong strong"><strong>CONSUMER_SECRET</strong></span> [string] required: The registered consumer secret(client secret) for this Red Hat Quay instance
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									<span class="strong strong"><strong>Example</strong></span>: e4a58ddd3d7408b7aec109e85564a0d153d3e846
								</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>USERFILES_LOCATION</strong></span> [string]: ID of the storage engine in which to place user-uploaded files.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">s3_us_east</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>USERFILES_PATH</strong></span> [string]: Path under storage in which to place user-uploaded files.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">userfiles</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>USER_RECOVERY_TOKEN_LIFETIME</strong></span> [string]: The length of time a token for recovering a user accounts is valid. Defaults to 30m.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">10m</code>
						</li><li class="listitem">
							<span class="strong strong"><strong>Pattern</strong></span>: <code class="literal">^[0-9]+(w|m|d|h|s)$</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>V1_PUSH_WHITELIST</strong></span> [array]: The array of namespace names that support V1 push if FEATURE_RESTRICTED_V1_PUSH is set to true.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">some</code>, <code class="literal">namespaces</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>V2_PAGINATION_SIZE</strong></span> [number]: The number of results returned per page in V2 registry APIs.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">100</code>
						</li></ul></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>WEBHOOK_HOSTNAME_BLACKLIST</strong></span> [array]: The set of hostnames to disallow from webhooks when validating, beyond localhost.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							<span class="strong strong"><strong>Example</strong></span>: <code class="literal">someexternaldomain.com</code>
						</li></ul></div></li></ul></div><h2 id="additional_resources">Additional resources</h2></section><div><div xml:lang="en-US" class="legalnotice" id="idm45584190408768"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2021 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>