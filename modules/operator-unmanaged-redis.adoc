:_mod-docs-content-type: PROCEDURE
[id="integrating-external-redis-db"]
= Integrating an external Redis database 

[role="_abstract"]
You can configure {productname-ocp} to use an existing Redis deployment for build logs and user event processing.

[NOTE]
====
The following procedure uses the {ocp} web console to configure {productname} to use an external Redis database. For most users, using the web console is simpler.

You can also complete this procedure by using the `oc` CLI. For more information, see "Modifying the QuayRegistry CR by using the CLI" and "Modifying the configuration file by using the CLI".
====

.Procedure

. In the {ocp} web console, navigate to *Operators* → *Installed Operators*.

. Click *Red Hat Quay*.

. Click *QuayRegistry*.

. Click the name of your {productname} registry, for example, *example-registry*.

. Click *YAML*.

. Set the `redis` component to unmanaged by adding the following entry under `spec.components`:
+
[source,yaml]
----
    - kind: redis
      managed: false
----

. Click *Save*.

. Click *Details* → the name of your `Config Bundle Secret` resource.

. On the *Secret details* page, click *Actions* → *Edit Secret*.

. In the `config.yaml` section, add entries for your external Redis instance. For example:
+
[source,yaml]
----
BUILDLOGS_REDIS:
  host: redis.example.com
  port: 6379
  ssl: false

USER_EVENTS_REDIS:
  host: redis.example.com
  port: 6379
  ssl: false
----
+
[IMPORTANT]
====
If both the `BUILDLOGS_REDIS` and `USER_EVENTS_REDIS` fields reference the same Redis deployment, ensure that your Redis service can handle the combined connection load.  
For large or high-throughput registries, use separate Redis databases or clusters for these components.
====

. Optional: Add additional database configuration fields, such as `DB_CONNECTION_ARGS` or SSL/TLS connection arguments. For more information, see link:https://docs.redhat.com/en/documentation/red_hat_quay/3/html-single/configure_red_hat_quay/index#config-fields-redis[Redis configuration fields].

. Click *Save*.