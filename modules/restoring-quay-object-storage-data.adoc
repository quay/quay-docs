:_mod-docs-content-type: PROCEDURE
[id="restoring-quay-object-storage-data"]
= Restoring the {productname} object storage data

[role="_abstract"]
To restore your {productname} object storage data from a backup, you can export AWS credentials from secrets and use the `aws s3 sync` command to upload blobs to your storage bucket. This procedure restores your registry's object storage data using backup files. 

[NOTE]
====
You can also use link:https://rclone.org/[rclone] or link:https://s3tools.org/s3cmd[sc3md] instead of the AWS command line utility.
====

.Procedure

. Export the `AWS_ACCESS_KEY_ID` by entering the following command:
+
[source,terminal]
----
$ export AWS_ACCESS_KEY_ID=$(oc get secret -l app=noobaa -n <quay-namespace>  -o jsonpath='{.items[0].data.AWS_ACCESS_KEY_ID}' |base64 -d)
----

. Export the `AWS_SECRET_ACCESS_KEY` by entering the following command:
+
[source,terminal]
----
$ export AWS_SECRET_ACCESS_KEY=$(oc get secret -l app=noobaa -n <quay-namespace> -o jsonpath='{.items[0].data.AWS_SECRET_ACCESS_KEY}' |base64 -d)
----

. Upload all blobs to the bucket by running the following command:
+
[source,terminal]
----
$ aws s3 sync --no-verify-ssl --endpoint https://$(oc get route s3 -n openshift-storage  -o jsonpath='{.spec.host}') ./blobs  s3://$(oc get cm -l app=noobaa -n <quay-namespace> -o jsonpath='{.items[0].data.BUCKET_NAME}')
----