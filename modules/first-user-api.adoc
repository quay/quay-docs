:_mod-docs-content-type: PROCEDURE
[id="using-the-api-to-create-first-user"]
= Using the API to create the first user

[role="_abstract"]
To create the first user with administrative privileges for your {productname} registry, you can use the API. This method requires configuring `FEATURE_USER_INITIALIZE` and `SUPER_USERS` in your `config.yaml` file before deployment. 

.Prerequisites

* You have set `FEATURE_USER_INITIALIZE: true` and established a superuser in your `config.yaml` file. For example:
+
[source,yaml]
----
# ...
FEATURE_USER_INITIALIZE: true
SUPER_USERS:
     -  <username>
# ..
----
+
If you did not configure these settings upon registry creation, and need to re-configure your registry to enable these settings, see "Enabling features after deployment".

* You have not created a user by using the {productname} UI.

.Procedure

. On the command-line interface, generate a new user with a username, password, email, and access token by entering the following `CURL` command:
+
[source,terminal]
----
$ curl -X POST -k  http:/</quay-server.example.com>/api/v1/user/initialize --header 'Content-Type: application/json' --data '{ "username": "<username>", "password":"<password>", "email": "<email>@example.com", "access_token": true}'
----
+
If successful, the command returns an object with the username, email, and encrypted password. For example:
+
[source,yaml]
----
{"access_token":"123456789", "email":"quayadmin@example.com","encrypted_password":"<password>","username":"quayadmin"} # gitleaks:allow
----
+
If a user already exists in the database, an error is returned. For example:
+
[source,terminal]
----
{"message":"Cannot initialize user in a non-empty database"}
----
+
If your password is not at least eight characters or contains whitespace, an error is returned. For example:
+
[source,terminal]
----
{"message":"Failed to initialize user: Invalid password, password must be at least 8 characters and contain no whitespace."}
----

. You can log in to your registry by navigating to the UI or by leveraging Podman on the CLI.

.. Log in to the registry by running the following `podman` command:
+
[source,terminal]
----
$ podman login -u <username> -p <password> http://<quay-server.example.com>
----