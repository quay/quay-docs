:_mod-docs-content-type: REFERENCE
[id="setting-up-builds-aws"]
= Builder configuration with Amazon Elastic Compute Cloud

[role="_abstract"]
To configure Amazon EC2 instances as build worker nodes in {product-title}, you can modify your configuration bundle to use EC2 executors. This provides a backup solution when your OpenShift build workers are overloaded or unavailable.

[NOTE]
====
Amazon EC2 builds are not supported by Red{nbsp}Hat. This is currently provided as an upstream feature only.
====

.Example configuration for bare metal builds with Amazon EC2
[source,yaml]
----
  EXECUTORS:
    - EXECUTOR: ec2
      QUAY_USERNAME: <quay_username>
      QUAY_PASSWORD: <quay_pass>
      WORKER_IMAGE: quay.io/quay/quay-builder
      WORKER_TAG: latest
      EC2_REGION: us-east-1
      COREOS_AMI: ami-02545325b519192df # Fedora CoreOS <1>
      AWS_ACCESS_KEY: *****
      AWS_SECRET_KEY: *****
      EC2_INSTANCE_TYPE: t2.large
      EC2_VPC_SUBNET_ID: <some_subnet>
      EC2_SECURITY_GROUP_IDS:
      - <sg-somesg>
      EC2_KEY_NAME: <some_key>
      BLOCK_DEVICE_SIZE: 58
      SSH_AUTHORIZED_KEYS: <2>
      - <ssh-rsa 12345 user1@email.com>
      - <ssh-rsa 67890 user2@email.com>
      HTTP_PROXY: <http://10.0.0.1:80>
      HTTPS_PROXY: <http://10.0.0.1:80>
      NO_PROXY: <hostname.example.com>
----

where:

`COREOS_AMI::` Specifies an AMI name where _builds_ will be run. Unlike bare metal _builds_, these container _builds_ are done directly within an ephemeral EC2 instance. This AMI must utilize ignition and contain a docker. The AMI shown in this example is used by {quay.io} for its build system.
`SSH_AUTHORIZED_KEYS::` Allows public SSH keys to be added to the build environment for remote troubleshooting access. This key, or keys, should correspond to the private key that an admin or developer will use to SSH into the build worker for debugging purposes. This key can be obtained by establishing an SSH connection to the remote host using a specific SSH key and port. For example: `$ ssh -i /path/to/ssh/key/set/in/ssh_authorized_keys -p 9999 core@localhost`.  